> # 1.1
> CPS = read.csv("CPSData.csv")
> str(CPS)
'data.frame':	131302 obs. of  14 variables:
 $ PeopleInHousehold : int  1 3 3 3 3 3 3 2 2 2 ...
 $ Region            : Factor w/ 4 levels "Midwest","Northeast",..: 3 3 3 3 3 3 3 3 3 3 ...
 $ State             : Factor w/ 51 levels "Alabama","Alaska",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ MetroAreaCode     : int  26620 13820 13820 13820 26620 26620 26620 33660 33660 26620 ...
 $ Age               : int  85 21 37 18 52 24 26 71 43 52 ...
 $ Married           : Factor w/ 5 levels "Divorced","Married",..: 5 3 3 3 5 3 3 1 1 3 ...
 $ Sex               : Factor w/ 2 levels "Female","Male": 1 2 1 2 1 2 2 1 2 2 ...
 $ Education         : Factor w/ 8 levels "Associate degree",..: 1 4 4 6 1 2 4 4 4 2 ...
 $ Race              : Factor w/ 6 levels "American Indian",..: 6 3 3 3 6 6 6 6 6 6 ...
 $ Hispanic          : int  0 0 0 0 0 0 0 0 0 0 ...
 $ CountryOfBirthCode: int  57 57 57 57 57 57 57 57 57 57 ...
 $ Citizenship       : Factor w/ 3 levels "Citizen, Native",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ EmploymentStatus  : Factor w/ 5 levels "Disabled","Employed",..: 4 5 1 3 2 2 2 2 3 2 ...
 $ Industry          : Factor w/ 14 levels "Agriculture, forestry, fishing, and hunting",..: NA 11 NA NA 11 4 14 4 NA 12 ...
> 
> # 1.2 - 1.4 - 2.1
> summary(CPS)
 PeopleInHousehold       Region               State       MetroAreaCode        Age                 Married     
 Min.   : 1.000    Midwest  :30684   California  :11570   Min.   :10420   Min.   : 0.00   Divorced     :11151  
 1st Qu.: 2.000    Northeast:25939   Texas       : 7077   1st Qu.:21780   1st Qu.:19.00   Married      :55509  
 Median : 3.000    South    :41502   New York    : 5595   Median :34740   Median :39.00   Never Married:30772  
 Mean   : 3.284    West     :33177   Florida     : 5149   Mean   :35075   Mean   :38.83   Separated    : 2027  
 3rd Qu.: 4.000                      Pennsylvania: 3930   3rd Qu.:41860   3rd Qu.:57.00   Widowed      : 6505  
 Max.   :15.000                      Illinois    : 3912   Max.   :79600   Max.   :85.00   NA's         :25338  
                                     (Other)     :94069   NA's   :34238                                        
     Sex                          Education                   Race           Hispanic      CountryOfBirthCode
 Female:67481   High school            :30906   American Indian :  1433   Min.   :0.0000   Min.   : 57.00    
 Male  :63821   Bachelor's degree      :19443   Asian           :  6520   1st Qu.:0.0000   1st Qu.: 57.00    
                Some college, no degree:18863   Black           : 13913   Median :0.0000   Median : 57.00    
                No high school diploma :16095   Multiracial     :  2897   Mean   :0.1393   Mean   : 82.68    
                Associate degree       : 9913   Pacific Islander:   618   3rd Qu.:0.0000   3rd Qu.: 57.00    
                (Other)                :10744   White           :105921   Max.   :1.0000   Max.   :555.00    
                NA's                   :25338                                                                
               Citizenship               EmploymentStatus                               Industry    
 Citizen, Native     :116639   Disabled          : 5712   Educational and health services   :15017  
 Citizen, Naturalized:  7073   Employed          :61733   Trade                             : 8933  
 Non-Citizen         :  7590   Not in Labor Force:15246   Professional and business services: 7519  
                               Retired           :18619   Manufacturing                     : 6791  
                               Unemployed        : 4203   Leisure and hospitality           : 6364  
                               NA's              :25789   (Other)                           :21618  
                                                          NA's                              :65060  
> 
> # 1.3
> sort(table(CPS$State))

          New Mexico              Montana          Mississippi              Alabama        West Virginia 
                1102                 1214                 1230                 1376                 1409 
            Arkansas            Louisiana                Idaho             Oklahoma              Arizona 
                1421                 1450                 1518                 1523                 1528 
              Alaska              Wyoming         North Dakota       South Carolina            Tennessee 
                1590                 1624                 1645                 1658                 1784 
District of Columbia             Kentucky                 Utah               Nevada              Vermont 
                1791                 1841                 1842                 1856                 1890 
              Kansas               Oregon             Nebraska        Massachusetts         South Dakota 
                1935                 1943                 1949                 1987                 2000 
             Indiana               Hawaii             Missouri         Rhode Island             Delaware 
                2004                 2099                 2145                 2209                 2214 
               Maine           Washington                 Iowa           New Jersey       North Carolina 
                2263                 2366                 2528                 2567                 2619 
       New Hampshire            Wisconsin              Georgia          Connecticut             Colorado 
                2662                 2686                 2807                 2836                 2925 
            Virginia             Michigan            Minnesota             Maryland                 Ohio 
                2953                 3063                 3139                 3200                 3678 
            Illinois         Pennsylvania              Florida             New York                Texas 
                3912                 3930                 5149                 5595                 7077 
          California 
               11570 
> 
> # 1.5
> table(CPS$Race, CPS$Hispanic)
                  
                       0     1
  American Indian   1129   304
  Asian             6407   113
  Black            13292   621
  Multiracial       2449   448
  Pacific Islander   541    77
  White            89190 16731
> 
> # 2.2
> table(CPS$Region, is.na(CPS$Married))
           
            FALSE  TRUE
  Midwest   24609  6075
  Northeast 21432  4507
  South     33535  7967
  West      26388  6789
> table(CPS$Age, is.na(CPS$Married))
    
     FALSE TRUE
  0      0 1283
  1      0 1559
  2      0 1574
  3      0 1693
  4      0 1695
  5      0 1795
  6      0 1721
  7      0 1681
  8      0 1729
  9      0 1748
  10     0 1750
  11     0 1721
  12     0 1797
  13     0 1802
  14     0 1790
  15  1795    0
  16  1751    0
  17  1764    0
  18  1596    0
  19  1517    0
  20  1398    0
  21  1525    0
  22  1536    0
  23  1638    0
  24  1627    0
  25  1604    0
  26  1643    0
  27  1657    0
  28  1736    0
  29  1645    0
  30  1854    0
  31  1762    0
  32  1790    0
  33  1804    0
  34  1653    0
  35  1716    0
  36  1663    0
  37  1531    0
  38  1530    0
  39  1542    0
  40  1571    0
  41  1673    0
  42  1711    0
  43  1819    0
  44  1764    0
  45  1749    0
  46  1665    0
  47  1647    0
  48  1791    0
  49  1989    0
  50  1966    0
  51  1931    0
  52  1935    0
  53  1994    0
  54  1912    0
  55  1895    0
  56  1935    0
  57  1827    0
  58  1874    0
  59  1758    0
  60  1746    0
  61  1735    0
  62  1595    0
  63  1596    0
  64  1519    0
  65  1569    0
  66  1577    0
  67  1227    0
  68  1130    0
  69  1062    0
  70  1195    0
  71  1031    0
  72   941    0
  73   896    0
  74   842    0
  75   763    0
  76   729    0
  77   698    0
  78   659    0
  79   661    0
  80  2664    0
  85  2446    0
> table(CPS$Sex, is.na(CPS$Married))
        
         FALSE  TRUE
  Female 55264 12217
  Male   50700 13121
> table(CPS$Citizenship, is.na(CPS$Married))
                      
                       FALSE  TRUE
  Citizen, Native      91956 24683
  Citizen, Naturalized  6910   163
  Non-Citizen           7098   492
> 
> # 2.3
> table(CPS$State, is.na(CPS$MetroAreaCode))
                      
                       FALSE  TRUE
  Alabama               1020   356
  Alaska                   0  1590
  Arizona               1327   201
  Arkansas               724   697
  California           11333   237
  Colorado              2545   380
  Connecticut           2593   243
  Delaware              1696   518
  District of Columbia  1791     0
  Florida               4947   202
  Georgia               2250   557
  Hawaii                1576   523
  Idaho                  761   757
  Illinois              3473   439
  Indiana               1420   584
  Iowa                  1297  1231
  Kansas                1234   701
  Kentucky               908   933
  Louisiana             1216   234
  Maine                  909  1354
  Maryland              2978   222
  Massachusetts         1858   129
  Michigan              2517   546
  Minnesota             2150   989
  Mississippi            376   854
  Missouri              1440   705
  Montana                199  1015
  Nebraska               816  1133
  Nevada                1609   247
  New Hampshire         1148  1514
  New Jersey            2567     0
  New Mexico             832   270
  New York              5144   451
  North Carolina        1642   977
  North Dakota           432  1213
  Ohio                  2754   924
  Oklahoma              1024   499
  Oregon                1519   424
  Pennsylvania          3245   685
  Rhode Island          2209     0
  South Carolina        1139   519
  South Dakota           595  1405
  Tennessee             1149   635
  Texas                 6060  1017
  Utah                  1455   387
  Vermont                657  1233
  Virginia              2367   586
  Washington            1937   429
  West Virginia          344  1065
  Wisconsin             1882   804
  Wyoming                  0  1624
> 
> # 2.4
> table(CPS$Region, is.na(CPS$MetroAreaCode))
           
            FALSE  TRUE
  Midwest   20010 10674
  Northeast 20330  5609
  South     31631  9871
  West      25093  8084
> 
> # 2.5
> sort(tapply(is.na(CPS$MetroAreaCode), CPS$State, mean))
District of Columbia           New Jersey         Rhode Island           California              Florida 
          0.00000000           0.00000000           0.00000000           0.02048401           0.03923092 
       Massachusetts             Maryland             New York          Connecticut             Illinois 
          0.06492199           0.06937500           0.08060769           0.08568406           0.11221881 
            Colorado              Arizona               Nevada                Texas            Louisiana 
          0.12991453           0.13154450           0.13308190           0.14370496           0.16137931 
        Pennsylvania             Michigan           Washington              Georgia             Virginia 
          0.17430025           0.17825661           0.18131868           0.19843249           0.19844226 
                Utah               Oregon             Delaware           New Mexico               Hawaii 
          0.21009772           0.21821925           0.23396567           0.24500907           0.24916627 
                Ohio              Alabama              Indiana            Wisconsin       South Carolina 
          0.25122349           0.25872093           0.29141717           0.29932986           0.31302774 
           Minnesota             Oklahoma             Missouri            Tennessee               Kansas 
          0.31506849           0.32764281           0.32867133           0.35594170           0.36227390 
      North Carolina                 Iowa             Arkansas                Idaho             Kentucky 
          0.37304315           0.48694620           0.49049965           0.49868248           0.50678979 
       New Hampshire             Nebraska                Maine              Vermont          Mississippi 
          0.56874530           0.58132376           0.59832081           0.65238095           0.69430894 
        South Dakota         North Dakota        West Virginia              Montana               Alaska 
          0.70250000           0.73738602           0.75585522           0.83607908           1.00000000 
             Wyoming 
          1.00000000 
> 
> # 3.1
> MetroAreaMap = read.csv("MetroAreaCodes.csv")
> CountryMap = read.csv("CountryCodes.csv")
> str(MetroAreaMap)
'data.frame':	271 obs. of  2 variables:
 $ Code     : int  460 3000 3160 3610 3720 6450 10420 10500 10580 10740 ...
 $ MetroArea: Factor w/ 271 levels "Akron, OH","Albany-Schenectady-Troy, NY",..: 12 92 97 117 122 195 1 3 2 4 ...
> str(CountryMap)
'data.frame':	149 obs. of  2 variables:
 $ Code   : int  57 66 73 78 96 100 102 103 104 105 ...
 $ Country: Factor w/ 149 levels "Afghanistan",..: 139 57 105 135 97 3 11 18 24 37 ...
> 
> # 3.2
> CPS = merge(CPS, MetroAreaMap, by.x="MetroAreaCode", by.y="Code", all.x=TRUE)
> summary(CPS)
 MetroAreaCode   PeopleInHousehold       Region               State            Age                 Married     
 Min.   :10420   Min.   : 1.000    Midwest  :30684   California  :11570   Min.   : 0.00   Divorced     :11151  
 1st Qu.:21780   1st Qu.: 2.000    Northeast:25939   Texas       : 7077   1st Qu.:19.00   Married      :55509  
 Median :34740   Median : 3.000    South    :41502   New York    : 5595   Median :39.00   Never Married:30772  
 Mean   :35075   Mean   : 3.284    West     :33177   Florida     : 5149   Mean   :38.83   Separated    : 2027  
 3rd Qu.:41860   3rd Qu.: 4.000                      Pennsylvania: 3930   3rd Qu.:57.00   Widowed      : 6505  
 Max.   :79600   Max.   :15.000                      Illinois    : 3912   Max.   :85.00   NA's         :25338  
 NA's   :34238                                       (Other)     :94069                                        
     Sex                          Education                   Race           Hispanic      CountryOfBirthCode
 Female:67481   High school            :30906   American Indian :  1433   Min.   :0.0000   Min.   : 57.00    
 Male  :63821   Bachelor's degree      :19443   Asian           :  6520   1st Qu.:0.0000   1st Qu.: 57.00    
                Some college, no degree:18863   Black           : 13913   Median :0.0000   Median : 57.00    
                No high school diploma :16095   Multiracial     :  2897   Mean   :0.1393   Mean   : 82.68    
                Associate degree       : 9913   Pacific Islander:   618   3rd Qu.:0.0000   3rd Qu.: 57.00    
                (Other)                :10744   White           :105921   Max.   :1.0000   Max.   :555.00    
                NA's                   :25338                                                                
               Citizenship               EmploymentStatus                               Industry    
 Citizen, Native     :116639   Disabled          : 5712   Educational and health services   :15017  
 Citizen, Naturalized:  7073   Employed          :61733   Trade                             : 8933  
 Non-Citizen         :  7590   Not in Labor Force:15246   Professional and business services: 7519  
                               Retired           :18619   Manufacturing                     : 6791  
                               Unemployed        : 4203   Leisure and hospitality           : 6364  
                               NA's              :25789   (Other)                           :21618  
                                                          NA's                              :65060  
                                              MetroArea    
 New York-Northern New Jersey-Long Island, NY-NJ-PA: 5409  
 Washington-Arlington-Alexandria, DC-VA-MD-WV      : 4177  
 Los Angeles-Long Beach-Santa Ana, CA              : 4102  
 Philadelphia-Camden-Wilmington, PA-NJ-DE          : 2855  
 Chicago-Naperville-Joliet, IN-IN-WI               : 2772  
 (Other)                                           :77749  
 NA's                                              :34238  
> 
> # 3.3
> sort(table(CPS$MetroArea))

                       Appleton-Oshkosh-Neenah, WI                  Grand Rapids-Muskegon-Holland, MI 
                                                 0                                                  0 
               Greenville-Spartanburg-Anderson, SC                        Hinesville-Fort Stewart, GA 
                                                 0                                                  0 
                                     Jamestown, NY                         Kalamazoo-Battle Creek, MI 
                                                 0                                                  0 
                       Portsmouth-Rochester, NH-ME                                  Bowling Green, KY 
                                                 0                                                 29 
                                    Ocean City, NJ                                    Springfield, OH 
                                                30                                                 34 
                             Bloomington-Normal IL                                       Valdosta, GA 
                                                40                                                 42 
                                 Warner Robins, GA                                    Tallahassee, FL 
                                                42                                                 43 
                                      Columbia, MO                                    Punta Gorda, FL 
                                                47                                                 48 
                                       Midland, TX                            Niles-Benton Harbor, MI 
                                                51                                                 51 
                                  Johnson City, TN                                       Santa Fe, NM 
                                                52                                                 52 
                                      Prescott, AZ                   Vineland-Millville-Bridgeton, NJ 
                                                54                                                 54 
                     Hickory-Morgantown-Lenoir, NC                                         Madera, CA 
                                                57                                                 57 
                                   Columbus, GA-AL                                         Joplin, MO 
                                                59                                                 59 
                        Panama City-Lynn Haven, FL                                          Chico, CA 
                                                59                                                 60 
                               Anniston-Oxford, AL                                           Napa, CA 
                                                61                                                 61 
                                      Anderson, IN                                       Florence, AL 
                                                62                                                 63 
                                  Jacksonville, NC                                      Johnstown, PA 
                                                63                                                 63 
                                       Lubbock, TX                                         Monroe, MI 
                                                63                                                 63 
                                      Anderson, SC                                     Farmington, NM 
                                                64                                                 64 
                           Athens-Clark County, GA                                Gulfport-Biloxi, MS 
                                                65                                                 65 
                                      Longview, TX                                          Macon, GA 
                                                65                                                 65 
                  Leominster-Fitchburg-Gardner, MA                                        Roanoke, VA 
                                                66                                                 66 
                        Santa-Cruz-Watsonville, CA                           Kingsport-Bristol, TN-VA 
                                                66                                                 67 
                                        Albany, GA                                     Bellingham, WA 
                                                68                                                 70 
                                   Gainesville, FL                                        Jackson, MI 
                                                70                                                 70 
                                    Binghamton, NY                                      Lynchburg, VA 
                                                73                                                 73 
                Saginaw-Saginaw Township North, MI                                      Salisbury, MD 
                                                74                                                 74 
                               Barnstable Town, MA                                          Ocala, FL 
                                                75                                                 76 
                                   Springfield, IL                                   Fayetteville, NC 
                                                76                                                 77 
                        Michigan City-La Porte, IN                    San Luis Obispo-Paso Robles, CA 
                                                77                                                 77 
                           Holland-Grand Haven, MI                                     Tuscaloosa, AL 
                                                78                                                 78 
                         Brownsville-Harlingen, TX                                     Vero Beach, FL 
                                                79                                                 79 
                                          Waco, TX             Fort Walton Beach-Crestview-Destin, FL 
                                                79                                                 80 
                                    Utica-Rome, NY                                        Decatur, IL 
                                                80                                                 81 
                                  Lake Charles, LA                        South Bend-Mishawaka, IN-MI 
                                                81                                                 81 
                                       Altoona, PA                       Huntington-Ashland, WV-KY-OH 
                                                82                                                 82 
                                       Medford, OR                            Naples-Marco Island, FL 
                                                82                                                 82 
                                     St. Cloud, MN                                      Ann Arbor, MI 
                                                82                                                 85 
                                Oshkosh-Neenah, WI                      Hagerstown-Martinsburg, MD-WV 
                                                85                                                 86 
                          Bremerton-Silverdale, WA                                           Erie, PA 
                                                87                                                 87 
                              Kankakee-Bradley, IL                                       Kingston, NY 
                                                87                                                 87 
                                      Amarillo, TX                                         Laredo, TX 
                                                88                                                 89 
                                  Harrisonburg, VA                         Muskegon-Norton Shores, MI 
                                                90                                                 90 
                                 Trenton-Ewing, NJ                                        Decatur, Al 
                                                91                                                 96 
                                        Wausau, WI                                         Lawton, OK 
                                                96                                                 97 
                                      Lawrence, KS                                      El Centro, CA 
                                                98                                                 99 
                                 Evansville, IN-KY                                     Janesville, WI 
                                                99                                                 99 
                                       Olympia, WA                                    Spartanburg, SC 
                                                99                                                 99 
                      Killeen-Temple-Fort Hood, TX                                          Flint, MI 
                                               101                                                102 
        Myrtle Beach-Conway-North Myrtle Beach, SC                                     Montgomery, AL 
                                               102                                                103 
                                   Bloomington, IN                                        Salinas, CA 
                                               104                                                104 
                                 Fort Smith, AR-OK                                         Merced, CA 
                                               105                                                106 
                                    Las Cruses, NM                     Pensacola-Ferry Pass-Brent, FL 
                                               107                                                107 
                    Port St. Lucie-Fort Pierce, FL                                     Eau Claire, WI 
                                               109                                                110 
                                        Mobile, AL                                  Atlantic City, NJ 
                                               110                                                111 
                                       Danbury, CT                                         Peoria, IL 
                                               112                                                112 
                                        Yakima, WA                                      La Crosse, WI 
                                               112                                                114 
                                      Rockford, IL                                      Asheville, NC 
                                               114                                                116 
                                      Victoria, TX                                  Coeur d'Alene, ID 
                                               116                                                117 
                                    Huntsville, AL                                   York-Hanover, PA 
                                               117                                                117 
                              Canton-Massillon, OH                           Lansing-East Lansing, MI 
                                               118                                                119 
                                        Racine, WI                            Visalia-Porterville, CA 
                                               119                                                121 
                              Champaign-Urbana, IL                           Beaumont-Port Author, TX 
                                               122                                                123 
                                       Appleton,WI                                      Duluth, MN-WI 
                                               125                                                126 
                             Kalamazoo-Portage, MI                                  Winston-Salem, NC 
                                               127                                                127 
                           Santa Rosa-Petaluma, CA                                         Pueblo, CO 
                                               129                                                130 
                                     Iowa City, IA                                 Corpus Christi, TX 
                                               131                                                132 
              Santa Barbara-Santa Maria-Goleta, CA                              Vallejo-Fairfield, CA 
                                               132                                                133 
                                    Fort Wayne, IN                                      Green Bay, WI 
                                               136                                                136 
                                          Bend, OR             Deltona-Daytona Beach-Ormond Beach, FL 
                                               140                                                140 
                                       Reading, PA                                   Worcester, MA-CT 
                                               142                                                144 
                         Cape Coral-Fort Myers, FL                        Shreveport-Bossier City, LA 
                                               146                                                146 
                         Lakeland-Winter Haven, FL                     Youngstown-Warren-Boardman, OH 
                                               149                                                153 
                                Springfield, MA-CT                                      Lancaster, PA 
                                               155                                                156 
                                       Spokane, WA                           Waterloo-Cedar Falls, IA 
                                               156                                                156 
                                     Waterbury, CT                                        Modesto, CA 
                                               157                                                158 
                    Augusta-Richmond County, GA-SC                                    Springfield, MO 
                                               161                                                161 
                                       Greeley, CO                                 Chattanooga, TN-GA 
                                               162                                                167 
                                     Knoxville, TN                  Palm Bay-Melbourne-Titusville, FL 
                                               168                                                168 
                                         Salem, OR                                        Boulder, CO 
                                               170                                                171 
                           Harrisburg-Carlisle, PA                          Scranton-Wilkes Barre, PA 
                                               174                                                176 
                                        Monroe, LA                                      Lafayette, LA 
                                               179                                                181 
                                        Topeka, KS                                     Greenville, SC 
                                               182                                                185 
                                        Durham, NC                      Sarasota-Bradenton-Venice, FL 
                                               189                                                192 
                                      Stockton, CA                         McAllen-Edinburg-Pharr, TX 
                                               193                                                195 
                                  Cedar Rapids, IA                             Eugene-Springfield, OR 
                                               196                                                196 
                             Lexington-Fayette, KY                                       Billings, MT 
                                               198                                                199 
              Poughkeepsie-Newburgh-Middletown, NY                                       Savannah, GA 
                                               201                                                202 
                         Norwich-New London, CT-RI                          Fort Collins-Loveland, CO 
                                               203                                                206 
                                        Bangor, ME              Fayetteville-Springdale-Rogers, AR-MO 
                                               208                                                215 
                                       Jackson, MS                                       Syracuse, NY 
                                               222                                                223 
                                         Akron, OH                    Charleston-North Charleston, SC 
                                               231                                                232 
                                        Toledo, OH                Davenport-Moline-Rock Island, IA-IL 
                                               235                                                240 
                                       El Paso, TX                                    Bakersfield, CA 
                                               244                                                245 
                         Greensboro-High Point, NC                                    Baton Rouge, LA 
                                               251                                                262 
                                    Charleston, WV                             Rochester-Dover, NH-ME 
                                               262                                                262 
                  Oxnard-Thousand Oaks-Ventura, CA                        Albany-Schenectady-Troy, NY 
                                               267                                                268 
                                        Dayton, OH                                        Madison, WI 
                                               268                                                284 
                                      Columbia, SC                                         Tucson, AZ 
                                               291                                                302 
                                        Fresno, CA                           Grand Rapids-Wyoming, MI 
                                               303                                                304 
                                     Rochester, NY                                     Provo-Orem, UT 
                                               307                                                309 
                                   Reno-Sparks, NV                                          Tulsa, OK 
                                               310                                                323 
                 Allentown-Bethlehem-Easton, PA-NJ                                   Raleigh-Cary, NC 
                                               334                                                336 
                         Buffalo-Niagara Falls, NY                                  Memphis, TN-MS-AR 
                                               344                                                348 
                   New Orleans-Metairie-Kenner, LA                               Colorado Springs, CO 
                                               367                                                372 
                             Birmingham-Hoover, AL                                   Jacksonville, FL 
                                               392                                                393 
                 Little Rock-North Little Rock, AR                               Ogden-Clearfield, UT 
                                               404                                                423 
                                       Wichita, KS                                       Fargo, ND-MN 
                                               427                                                432 
                                         Dover, DE                                       Richmond, VA 
                                               456                                                490 
                                    Des Moines, IA                Nashville-Davidson-Murfreesboro, TN 
                                               501                                                505 
                                     New Haven, CT                              Austin-Round Rock, TX 
                                               506                                                516 
                 Charlotte-Gastonia-Concord, NC-SC                                  Louisville, KY-IN 
                                               517                                                519 
                                      Columbus, OH                                   Indianapolis, IN 
                                               551                                                570 
                                   Sioux Falls, SD         Virginia Beach-Norfolk-Newport News, VA-NC 
                                               595                                                597 
                                 Oklahoma City, OK                                    San Antonio, TX 
                                               604                                                607 
                                   Albuquerque, NM                                        Orlando, FL 
                                               609                                                610 
                              Boise City-Nampa, ID                    Burlington-South Burlington, VT 
                                               644                                                657 
             Sacramento-Arden-Arcade-Roseville, CA                 San Jose-Sunnyvale-Santa Clara, CA 
                                               667                                                670 
                       Cleveland-Elyria-Mentor, OH                        Portland-South Portland, ME 
                                               681                                                701 
                 Milwaukee-Waukesha-West Allis, WI                    Cincinnati-Middletown, OH-KY-IN 
                                               714                                                719 
                                Salt Lake City, UT                    Bridgeport-Stamford-Norwalk, CT 
                                               723                                                730 
                                    Pittsburgh, PA                Tampa-St. Petersburg-Clearwater, FL 
                                               732                                                842 
          Hartford-West Hartford-East Hartford, CT                  San Diego-Carlsbad-San Marcos, CA 
                                               885                                                907 
                                  St. Louis, MO-IL                        Omaha-Council Bluffs, NE-IA 
                                               956                                                957 
                                Kansas City, MO-KS                        Phoenix-Mesa-Scottsdale, AZ 
                                               962                                                971 
               Portland-Vancouver-Beaverton, OR-WA                        Seattle-Tacoma-Bellevue, WA 
                                              1089                                               1255 
                      Riverside-San Bernardino, CA                             Las Vegas-Paradise, NV 
                                              1290                                               1299 
                        Detroit-Warren-Livonia, MI                  San Francisco-Oakland-Fremont, CA 
                                              1354                                               1386 
                              Baltimore-Towson, MD                                  Denver-Aurora, CO 
                                              1483                                               1504 
                Atlanta-Sandy Springs-Marietta, GA              Miami-Fort Lauderdale-Miami Beach, FL 
                                              1552                                               1554 
                                      Honolulu, HI                     Houston-Baytown-Sugar Land, TX 
                                              1576                                               1649 
                   Dallas-Fort Worth-Arlington, TX             Minneapolis-St Paul-Bloomington, MN-WI 
                                              1863                                               1942 
                    Boston-Cambridge-Quincy, MA-NH               Providence-Fall River-Warwick, MA-RI 
                                              2229                                               2284 
               Chicago-Naperville-Joliet, IN-IN-WI           Philadelphia-Camden-Wilmington, PA-NJ-DE 
                                              2772                                               2855 
              Los Angeles-Long Beach-Santa Ana, CA       Washington-Arlington-Alexandria, DC-VA-MD-WV 
                                              4102                                               4177 
New York-Northern New Jersey-Long Island, NY-NJ-PA 
                                              5409 
> 
> # 3.4
> sort(tapply(CPS$Hispanic, CPS$MetroArea, mean))
                                      Anderson, SC                                      Ann Arbor, MI 
                                       0.000000000                                        0.000000000 
                               Barnstable Town, MA                              Bloomington-Normal IL 
                                       0.000000000                                        0.000000000 
                                   Bloomington, IN                                  Bowling Green, KY 
                                       0.000000000                                        0.000000000 
                                       Decatur, IL                                     Eau Claire, WI 
                                       0.000000000                                        0.000000000 
                                      Florence, AL                      Hagerstown-Martinsburg, MD-WV 
                                       0.000000000                                        0.000000000 
                                  Harrisonburg, VA                       Huntington-Ashland, WV-KY-OH 
                                       0.000000000                                        0.000000000 
                                    Huntsville, AL                                        Jackson, MI 
                                       0.000000000                                        0.000000000 
                                     Johnstown, PA                                          Macon, GA 
                                       0.000000000                                        0.000000000 
                                        Mobile, AL                                      Salisbury, MD 
                                       0.000000000                                        0.000000000 
                                      Savannah, GA                                  Warner Robins, GA 
                                       0.000000000                                        0.000000000 
                                        Dayton, OH                                         Monroe, LA 
                                       0.003731343                                        0.005586592 
                                     Knoxville, TN                                     Charleston, WV 
                                       0.005952381                                        0.007633588 
                                       Appleton,WI                                        Jackson, MS 
                                       0.008000000                                        0.009009009 
                   Burlington-South Burlington, VT                                     Montgomery, AL 
                                       0.009132420                                        0.009708738 
                                        Wausau, WI                        Portland-South Portland, ME 
                                       0.010416667                                        0.011412268 
                                Oshkosh-Neenah, WI                                        Altoona, PA 
                                       0.011764706                                        0.012195122 
                                     St. Cloud, MN                            Holland-Grand Haven, MI 
                                       0.012195122                                        0.012820513 
                                         Akron, OH                                    Springfield, IL 
                                       0.012987013                                        0.013157895 
                                    Bellingham, WA                                         Bangor, ME 
                                       0.014285714                                        0.014423077 
                          Kingsport-Bristol, TN-VA                                   Cedar Rapids, IA 
                                       0.014925373                                        0.015306122 
                               Gulfport-Biloxi, MS                                      Duluth, MN-WI 
                                       0.015384615                                        0.015873016 
                                    Pittsburgh, PA                                         Joplin, MO 
                                       0.016393443                                        0.016949153 
                   Charleston-North Charleston, SC                          Buffalo-Niagara Falls, NY 
                                       0.017241379                                        0.017441860 
                                     La Crosse, WI                            Niles-Benton Harbor, MI 
                                       0.017543860                                        0.019607843 
                                 Evansville, IN-KY                                    Spartanburg, SC 
                                       0.020202020                                        0.020202020 
                                          Bend, OR                         Muskegon-Norton Shores, MI 
                                       0.021428571                                        0.022222222 
                                          Erie, PA                            Harrisburg-Carlisle, PA 
                                       0.022988506                                        0.022988506 
                                       Madison, WI                                   Lake Charles, LA 
                                       0.024647887                                        0.024691358 
                                      Fargo, ND-MN                                  Coeur d'Alene, ID 
                                       0.025462963                                        0.025641026 
                                       Spokane, WA                 Saginaw-Saginaw Township North, MI 
                                       0.025641026                                        0.027027027 
                                     Lynchburg, VA                     Pensacola-Ferry Pass-Brent, FL 
                                       0.027397260                                        0.028037383 
                                 Memphis, TN-MS-AR                                    Springfield, OH 
                                       0.028735632                                        0.029411765 
                                      Billings, MT                                     Janesville, WI 
                                       0.030150754                                        0.030303030 
                                       Roanoke, VA                                   St. Louis, MO-IL 
                                       0.030303030                                        0.030334728 
                                     Iowa City, IA                             Rochester-Dover, NH-ME 
                                       0.030534351                                        0.030534351 
                             Kalamazoo-Portage, MI                     Youngstown-Warren-Boardman, OH 
                                       0.031496063                                        0.032679739 
                              Champaign-Urbana, IL                                         Toledo, OH 
                                       0.032786885                                        0.034042553 
                                    Fort Wayne, IN                  Little Rock-North Little Rock, AR 
                                       0.036764706                                        0.037128713 
                        Detroit-Warren-Livonia, MI                                     Greenville, SC 
                                       0.037666174                                        0.037837838 
                                   Baton Rouge, LA                                   Johnson City, TN 
                                       0.038167939                                        0.038461538 
                                 Louisville, KY-IN                         Michigan City-La Porte, IN 
                                       0.038535645                                        0.038961039 
                                         Flint, MI                    Cincinnati-Middletown, OH-KY-IN 
                                       0.039215686                                        0.040333797 
                             Lexington-Fayette, KY                                       Lawrence, KS 
                                       0.040404040                                        0.040816327 
                       Albany-Schenectady-Troy, NY                                     Binghamton, NY 
                                       0.041044776                                        0.041095890 
                                   Punta Gorda, FL                                    Sioux Falls, SD 
                                       0.041666667                                        0.042016807 
                                      Columbia, MO                                   York-Hanover, PA 
                                       0.042553191                                        0.042735043 
                                   Gainesville, FL                                       Richmond, VA 
                                       0.042857143                                        0.042857143 
                                   Springfield, MO                                       Columbus, OH 
                                       0.043478261                                        0.043557169 
                                      Rockford, IL                                         Albany, GA 
                                       0.043859649                                        0.044117647 
                     Sarasota-Bradenton-Venice, FL                                       Valdosta, GA 
                                       0.046875000                                        0.047619048 
                               Anniston-Oxford, AL                        South Bend-Mishawaka, IN-MI 
                                       0.049180328                                        0.049382716 
        Virginia Beach-Norfolk-Newport News, VA-NC             Minneapolis-St Paul-Bloomington, MN-WI 
                                       0.050251256                                        0.052008239 
                                       Decatur, Al                              Birmingham-Hoover, AL 
                                       0.052083333                                        0.053571429 
                 Palm Bay-Melbourne-Titusville, FL                                  Winston-Salem, NC 
                                       0.053571429                                        0.055118110 
                                         Dover, DE                           Bremerton-Silverdale, WA 
                                       0.057017544                                        0.057471264 
                                     Rochester, NY         Myrtle Beach-Conway-North Myrtle Beach, SC 
                                       0.058631922                                        0.058823529 
                                        Racine, WI                                       Honolulu, HI 
                                       0.058823529                                        0.059644670 
                       Cleveland-Elyria-Mentor, OH                                      Asheville, NC 
                                       0.060205580                                        0.060344828 
                                     Lafayette, LA                                         Peoria, IL 
                                       0.060773481                                        0.062500000 
                                        Monroe, MI                                       Anderson, IN 
                                       0.063492063                                        0.064516129 
                                    Provo-Orem, UT                                     Ocean City, NJ 
                                       0.064724919                                        0.066666667 
                        Panama City-Lynn Haven, FL                                       Kingston, NY 
                                       0.067796610                                        0.068965517 
               Nashville-Davidson-Murfreesboro, TN                     Boston-Cambridge-Quincy, MA-NH 
                                       0.069306931                                        0.069537909 
                                   Tallahassee, FL                        Omaha-Council Bluffs, NE-IA 
                                       0.069767442                                        0.070010449 
                                  Indianapolis, IN                                      New Haven, CT 
                                       0.071929825                                        0.073122530 
                                    Des Moines, IA                                     Utica-Rome, NY 
                                       0.073852295                                        0.075000000 
                         Greensboro-High Point, NC                                     Vero Beach, FL 
                                       0.075697211                                        0.075949367 
                              Canton-Massillon, OH                             Eugene-Springfield, OR 
                                       0.076271186                                        0.076530612 
                                Chattanooga, TN-GA           Philadelphia-Camden-Wilmington, PA-NJ-DE 
                                       0.077844311                                        0.078458844 
                                      Columbia, SC                                       Syracuse, NY 
                                       0.079037801                                        0.080717489 
                       Shreveport-Bossier City, LA                               Baltimore-Towson, MD 
                                       0.082191781                                        0.082265678 
                                  Worcester, MA-CT                           Lansing-East Lansing, MI 
                                       0.083333333                                        0.084033613 
                                       Medford, OR                  Milwaukee-Waukesha-West Allis, WI 
                                       0.085365854                                        0.085434174 
                Atlanta-Sandy Springs-Marietta, GA                                  Fort Smith, AR-OK 
                                       0.085695876                                        0.085714286 
                 Allentown-Bethlehem-Easton, PA-NJ                      Hickory-Morgantown-Lenoir, NC 
                                       0.086826347                                        0.087719298 
                       Seattle-Tacoma-Bellevue, WA                                  Atlantic City, NJ 
                                       0.088446215                                        0.090090090 
                  Leominster-Fitchburg-Gardner, MA                                   Jacksonville, FL 
                                       0.090909091                                        0.091603053 
               Davenport-Moline-Rock Island, IA-IL                     Augusta-Richmond County, GA-SC 
                                       0.091666667                                        0.093167702 
                              Boise City-Nampa, ID                                         Topeka, KS 
                                       0.093167702                                        0.093406593 
               Portland-Vancouver-Beaverton, OR-WA             Deltona-Daytona Beach-Ormond Beach, FL 
                                       0.094582185                                        0.100000000 
                    Port St. Lucie-Fort Pierce, FL                                      Lancaster, PA 
                                       0.100917431                                        0.102564103 
                                    Tuscaloosa, AL                          Norwich-New London, CT-RI 
                                       0.102564103                                        0.103448276 
          Hartford-West Hartford-East Hartford, CT                                  Oklahoma City, OK 
                                       0.105084746                                        0.107615894 
                          Waterloo-Cedar Falls, IA                                         Durham, NC 
                                       0.108974359                                        0.111111111 
                   New Orleans-Metairie-Kenner, LA                    Bridgeport-Stamford-Norwalk, CT 
                                       0.111716621                                        0.112328767 
            Fort Walton Beach-Crestview-Destin, FL               Providence-Fall River-Warwick, MA-RI 
                                       0.112500000                                        0.114273205 
                                         Tulsa, OK                               Kankakee-Bradley, IL 
                                       0.114551084                                        0.114942529 
                                         Chico, CA                  Charlotte-Gastonia-Concord, NC-SC 
                                       0.116666667                                        0.117988395 
                                  Raleigh-Cary, NC                               Colorado Springs, CO 
                                       0.119047619                                        0.120967742 
                                       Olympia, WA                          Fort Collins-Loveland, CO 
                                       0.121212121                                        0.121359223 
      Washington-Arlington-Alexandria, DC-VA-MD-WV                                 Kansas City, MO-KS 
                                       0.121378980                                        0.121621622 
                           Athens-Clark County, GA                                         Lawton, OK 
                                       0.123076923                                        0.123711340 
                                     Green Bay, WI                                   Jacksonville, NC 
                                       0.125000000                                        0.126984127 
                                      Prescott, AZ                                  Trenton-Ewing, NJ 
                                       0.129629630                                        0.131868132 
                                       Wichita, KS                          Lakeland-Winter Haven, FL 
                                       0.133489461                                        0.134228188 
                         Scranton-Wilkes Barre, PA                           Grand Rapids-Wyoming, MI 
                                       0.136363636                                        0.138157895 
                              Ogden-Clearfield, UT                                        Boulder, CO 
                                       0.144208038                                        0.146198830 
             Fayetteville-Springdale-Rogers, AR-MO                         Santa-Cruz-Watsonville, CA 
                                       0.148837209                                        0.151515152 
                                Salt Lake City, UT                                   Fayetteville, NC 
                                       0.154910097                                        0.155844156 
                                         Ocala, FL                Tampa-St. Petersburg-Clearwater, FL 
                                       0.157894737                                        0.159144893 
                                       Greeley, CO                Chicago-Naperville-Joliet, IN-IN-WI 
                                       0.160493827                                        0.167388167 
                           Naples-Marco Island, FL                                    Reno-Sparks, NV 
                                       0.182926829                                        0.196774194 
                 San Francisco-Oakland-Fremont, CA                                    Columbus, GA-AL 
                                       0.199855700                                        0.203389831 
                             Vallejo-Fairfield, CA                                        Reading, PA 
                                       0.210526316                                        0.211267606 
                                         Salem, OR                                        Orlando, FL 
                                       0.211764706                                        0.213114754 
                                Springfield, MA-CT                           Beaumont-Port Author, TX 
                                       0.219354839                                        0.227642276 
New York-Northern New Jersey-Long Island, NY-NJ-PA                                           Napa, CA 
                                       0.228508042                                        0.229508197 
                                 Denver-Aurora, CO                            Santa Rosa-Petaluma, CA 
                                       0.232047872                                        0.232558140 
                                    Farmington, NM                    San Luis Obispo-Paso Robles, CA 
                                       0.234375000                                        0.246753247 
                                     Waterbury, CT                             Las Vegas-Paradise, NV 
                                       0.248407643                                        0.251732102 
                       Phoenix-Mesa-Scottsdale, AZ                                       Amarillo, TX 
                                       0.254376931                                        0.261363636 
             Sacramento-Arden-Arcade-Roseville, CA                  San Diego-Carlsbad-San Marcos, CA 
                                       0.263868066                                        0.269018743 
              Poughkeepsie-Newburgh-Middletown, NY                    Dallas-Fort Worth-Arlington, TX 
                                       0.273631841                                        0.283950617 
                                       Lubbock, TX                                       Longview, TX 
                                       0.285714286                                        0.292307692 
                                        Pueblo, CO                              Austin-Round Rock, TX 
                                       0.307692308                                        0.310077519 
                San Jose-Sunnyvale-Santa Clara, CA                                       Stockton, CA 
                                       0.316417910                                        0.321243523 
                                          Waco, TX                                        Danbury, CT 
                                       0.329113924                                        0.339285714 
                                       Modesto, CA                                        Midland, TX 
                                       0.341772152                                        0.352941176 
                                        Yakima, WA                     Houston-Baytown-Sugar Land, TX 
                                       0.357142857                                        0.359005458 
                  Oxnard-Thousand Oaks-Ventura, CA                       Killeen-Temple-Fort Hood, TX 
                                       0.359550562                                        0.386138614 
              Santa Barbara-Santa Maria-Goleta, CA                   Vineland-Millville-Bridgeton, NJ 
                                       0.401515152                                        0.407407407 
                                        Fresno, CA                            Visalia-Porterville, CA 
                                       0.409240924                                        0.438016529 
                         Cape Coral-Fort Myers, FL                                    Albuquerque, NM 
                                       0.438356164                                        0.441707718 
              Los Angeles-Long Beach-Santa Ana, CA                                       Santa Fe, NM 
                                       0.460263286                                        0.461538462 
                                      Victoria, TX              Miami-Fort Lauderdale-Miami Beach, FL 
                                       0.465517241                                        0.467824968 
                                   Bakersfield, CA                       Riverside-San Bernardino, CA 
                                       0.489795918                                        0.502325581 
                                        Tucson, AZ                                     Las Cruses, NM 
                                       0.506622517                                        0.542056075 
                                       Salinas, CA                                         Merced, CA 
                                       0.557692308                                        0.566037736 
                                Corpus Christi, TX                                         Madera, CA 
                                       0.606060606                                        0.614035088 
                                   San Antonio, TX                                      El Centro, CA 
                                       0.644151565                                        0.686868687 
                                       El Paso, TX                          Brownsville-Harlingen, TX 
                                       0.790983607                                        0.797468354 
                        McAllen-Edinburg-Pharr, TX                                         Laredo, TX 
                                       0.948717949                                        0.966292135 
> 
> # 3.5
> sort(tapply(CPS$Race == "Asian", CPS$MetroArea, mean))
                                        Albany, GA                                        Altoona, PA 
                                       0.000000000                                        0.000000000 
                                      Amarillo, TX                                       Anderson, IN 
                                       0.000000000                                        0.000000000 
                                       Appleton,WI                                      Asheville, NC 
                                       0.000000000                                        0.000000000 
                               Barnstable Town, MA                           Beaumont-Port Author, TX 
                                       0.000000000                                        0.000000000 
                                      Billings, MT                                     Binghamton, NY 
                                       0.000000000                                        0.000000000 
                                   Bloomington, IN                                  Bowling Green, KY 
                                       0.000000000                                        0.000000000 
                              Canton-Massillon, OH                                     Charleston, WV 
                                       0.000000000                                        0.000000000 
                                         Chico, CA                                    Columbus, GA-AL 
                                       0.000000000                                        0.000000000 
                                       Decatur, IL                                         Durham, NC 
                                       0.000000000                                        0.000000000 
                                    Eau Claire, WI                                        El Paso, TX 
                                       0.000000000                                        0.000000000 
                                          Erie, PA                                     Farmington, NM 
                                       0.000000000                                        0.000000000 
                                      Florence, AL                      Hagerstown-Martinsburg, MD-WV 
                                       0.000000000                                        0.000000000 
                                    Huntsville, AL                                        Jackson, MI 
                                       0.000000000                                        0.000000000 
                                       Jackson, MS                                     Janesville, WI 
                                       0.000000000                                        0.000000000 
                                  Johnson City, TN                                         Joplin, MO 
                                       0.000000000                                        0.000000000 
                              Kankakee-Bradley, IL                       Killeen-Temple-Fort Hood, TX 
                                       0.000000000                                        0.000000000 
                          Kingsport-Bristol, TN-VA                                      Knoxville, TN 
                                       0.000000000                                        0.000000000 
                                     Lafayette, LA                           Lansing-East Lansing, MI 
                                       0.000000000                                        0.000000000 
                                        Laredo, TX                   Leominster-Fitchburg-Gardner, MA 
                                       0.000000000                                        0.000000000 
                                      Longview, TX                                        Lubbock, TX 
                                       0.000000000                                        0.000000000 
                                     Lynchburg, VA                                          Macon, GA 
                                       0.000000000                                        0.000000000 
                                        Madera, CA                         McAllen-Edinburg-Pharr, TX 
                                       0.000000000                                        0.000000000 
                        Michigan City-La Porte, IN                                        Midland, TX 
                                       0.000000000                                        0.000000000 
                                        Monroe, MI                         Muskegon-Norton Shores, MI 
                                       0.000000000                                        0.000000000 
        Myrtle Beach-Conway-North Myrtle Beach, SC                            Niles-Benton Harbor, MI 
                                       0.000000000                                        0.000000000 
                                    Ocean City, NJ                                 Oshkosh-Neenah, WI 
                                       0.000000000                                        0.000000000 
                    Port St. Lucie-Fort Pierce, FL               Poughkeepsie-Newburgh-Middletown, NY 
                                       0.000000000                                        0.000000000 
                                        Pueblo, CO                                    Punta Gorda, FL 
                                       0.000000000                                        0.000000000 
                                        Racine, WI                                        Reading, PA 
                                       0.000000000                                        0.000000000 
                                       Roanoke, VA                                       Rockford, IL 
                                       0.000000000                                        0.000000000 
                Saginaw-Saginaw Township North, MI                                          Salem, OR 
                                       0.000000000                                        0.000000000 
                                     Salisbury, MD                                       Santa Fe, NM 
                                       0.000000000                                        0.000000000 
                        Santa-Cruz-Watsonville, CA                          Scranton-Wilkes Barre, PA 
                                       0.000000000                                        0.000000000 
                       Shreveport-Bossier City, LA                        South Bend-Mishawaka, IN-MI 
                                       0.000000000                                        0.000000000 
                                   Spartanburg, SC                                 Springfield, MA-CT 
                                       0.000000000                                        0.000000000 
                                   Springfield, OH                                      St. Cloud, MN 
                                       0.000000000                                        0.000000000 
                                   Tallahassee, FL                                     Tuscaloosa, AL 
                                       0.000000000                                        0.000000000 
                                    Utica-Rome, NY                                       Valdosta, GA 
                                       0.000000000                                        0.000000000 
                                    Vero Beach, FL                                       Victoria, TX 
                                       0.000000000                                        0.000000000 
                  Vineland-Millville-Bridgeton, NJ                                           Waco, TX 
                                       0.000000000                                        0.000000000 
                                     Waterbury, CT                                         Wausau, WI 
                                       0.000000000                                        0.000000000 
                                  St. Louis, MO-IL                    New Orleans-Metairie-Kenner, LA 
                                       0.002092050                                        0.002724796 
                                   San Antonio, TX                    Charleston-North Charleston, SC 
                                       0.003294893                                        0.004310345 
                                        Monroe, LA                                 Chattanooga, TN-GA 
                                       0.005586592                                        0.005988024 
                                       Modesto, CA                                           Bend, OR 
                                       0.006329114                                        0.007142857 
                                        Dayton, OH               Santa Barbara-Santa Maria-Goleta, CA 
                                       0.007462687                                        0.007575758 
                           Santa Rosa-Petaluma, CA                                         Toledo, OH 
                                       0.007751938                                        0.008510638 
                                 Coeur d'Alene, ID                                   York-Hanover, PA 
                                       0.008547009                                        0.008547009 
                                        Yakima, WA                           Grand Rapids-Wyoming, MI 
                                       0.008928571                                        0.009868421 
                                   Sioux Falls, SD                                  Evansville, IN-KY 
                                       0.010084034                                        0.010101010 
                                      Lawrence, KS                        Cleveland-Elyria-Mentor, OH 
                                       0.010204082                                        0.010279001 
                                        Lawton, OK                               Boise City-Nampa, ID 
                                       0.010309278                                        0.010869565 
                           Harrisburg-Carlisle, PA                                       Kingston, NY 
                                       0.011494253                                        0.011494253 
                                 Louisville, KY-IN                                        Medford, OR 
                                       0.011560694                                        0.012195122 
                                       Greeley, CO                                    Springfield, MO 
                                       0.012345679                                        0.012422360 
                             Birmingham-Hoover, AL                           Waterloo-Cedar Falls, IA 
                                       0.012755102                                        0.012820513 
                                    Provo-Orem, UT                     Youngstown-Warren-Boardman, OH 
                                       0.012944984                                        0.013071895 
                                         Ocala, FL                  Allentown-Bethlehem-Easton, PA-NJ 
                                       0.013157895                                        0.014970060 
                                Corpus Christi, TX                                          Dover, DE 
                                       0.015151515                                        0.015350877 
                 Charlotte-Gastonia-Concord, NC-SC                      Sarasota-Bradenton-Venice, FL 
                                       0.015473888                                        0.015625000 
                             Kalamazoo-Portage, MI                                  Winston-Salem, NC 
                                       0.015748031                                        0.015748031 
                                     Johnstown, PA                               Colorado Springs, CO 
                                       0.015873016                                        0.016129032 
                              Champaign-Urbana, IL                                           Napa, CA 
                                       0.016393443                                        0.016393443 
                        Panama City-Lynn Haven, FL                                  Memphis, TN-MS-AR 
                                       0.016949153                                        0.017241379 
                                      Columbus, OH                                       Prescott, AZ 
                                       0.018148820                                        0.018518519 
                                    Las Cruses, NM                     Pensacola-Ferry Pass-Brent, FL 
                                       0.018691589                                        0.018691589 
                                       Spokane, WA                          Fort Collins-Loveland, CO 
                                       0.019230769                                        0.019417476 
                                         Flint, MI                                       Savannah, GA 
                                       0.019607843                                        0.019801980 
                                        Tucson, AZ                                      El Centro, CA 
                                       0.019867550                                        0.020202020 
                            Eugene-Springfield, OR                Davenport-Moline-Rock Island, IA-IL 
                                       0.020408163                                        0.020833333 
            Deltona-Daytona Beach-Ormond Beach, FL                                         Topeka, KS 
                                       0.021428571                                        0.021978022 
                   Cincinnati-Middletown, OH-KY-IN                  Little Rock-North Little Rock, AR 
                                       0.022253129                                        0.022277228 
                       Albany-Schenectady-Troy, NY                                    Baton Rouge, LA 
                                       0.022388060                                        0.022900763 
                          Bremerton-Silverdale, WA                                         Bangor, ME 
                                       0.022988506                                        0.024038462 
                           Naples-Marco Island, FL                                   Indianapolis, IN 
                                       0.024390244                                        0.024561404 
                    Augusta-Richmond County, GA-SC                            Holland-Grand Haven, MI 
                                       0.024844720                                        0.025641026 
                                  Fayetteville, NC                               Ogden-Clearfield, UT 
                                       0.025974026                                        0.026004728 
                            Rochester-Dover, NH-ME         Virginia Beach-Norfolk-Newport News, VA-NC 
                                       0.026717557                                        0.026800670 
                         Lakeland-Winter Haven, FL                                       Columbia, SC 
                                       0.026845638                                        0.027491409 
                                      Fargo, ND-MN                                     Bellingham, WA 
                                       0.027777778                                        0.028571429 
                                    Montgomery, AL                        Omaha-Council Bluffs, NE-IA 
                                       0.029126214                                        0.029258098 
                                         Akron, OH                                        Wichita, KS 
                                       0.030303030                                        0.030444965 
                           Athens-Clark County, GA                                Gulfport-Biloxi, MS 
                                       0.030769231                                        0.030769231 
                                      Anderson, SC                                  Denver-Aurora, CO 
                                       0.031250000                                        0.031914894 
                                    Greenville, SC           Philadelphia-Camden-Wilmington, PA-NJ-DE 
                                       0.032432432                                        0.032924694 
                                  Harrisonburg, VA                          Cape Coral-Fort Myers, FL 
                                       0.033333333                                        0.034246575 
                                Kansas City, MO-KS                                   Worcester, MA-CT 
                                       0.034303534                                        0.034722222 
                                 Oklahoma City, OK                      Hickory-Morgantown-Lenoir, NC 
                                       0.034768212                                        0.035087719 
                             Lexington-Fayette, KY              Miami-Fort Lauderdale-Miami Beach, FL 
                                       0.035353535                                        0.035392535 
                 Palm Bay-Melbourne-Titusville, FL                                 Salt Lake City, UT 
                                       0.035714286                                        0.035961272 
                                        Mobile, AL                       Huntington-Ashland, WV-KY-OH 
                                       0.036363636                                        0.036585366 
                                      Richmond, VA                                     Fort Wayne, IN 
                                       0.036734694                                        0.036764706 
            Fort Walton Beach-Crestview-Destin, FL                                     Des Moines, IA 
                                       0.037500000                                        0.037924152 
                       Phoenix-Mesa-Scottsdale, AZ                                     Pittsburgh, PA 
                                       0.038105046                                        0.038251366 
                   Bridgeport-Stamford-Norwalk, CT               Providence-Fall River-Warwick, MA-RI 
                                       0.038356164                                        0.038966725 
               Tampa-St. Petersburg-Clearwater, FL                                      Duluth, MN-WI 
                                       0.039192399                                        0.039682540 
                                      Syracuse, NY                                    Albuquerque, NM 
                                       0.040358744                                        0.041050903 
                                       Decatur, Al                        Portland-South Portland, ME 
                                       0.041666667                                        0.042796006 
                                   Gainesville, FL                         Detroit-Warren-Livonia, MI 
                                       0.042857143                                        0.043574594 
                                 Trenton-Ewing, NJ                                      New Haven, CT 
                                       0.043956044                                        0.047430830 
                                  Jacksonville, NC                  Milwaukee-Waukesha-West Allis, WI 
                                       0.047619048                                        0.047619048 
                                  Jacksonville, FL                    Burlington-South Burlington, VT 
                                       0.048346056                                        0.048706240 
                               Anniston-Oxford, AL                                          Tulsa, OK 
                                       0.049180328                                        0.049535604 
                                  Raleigh-Cary, NC                                        Orlando, FL 
                                       0.050595238                                        0.050819672 
             Fayetteville-Springdale-Rogers, AR-MO                    San Luis Obispo-Paso Robles, CA 
                                       0.051162791                                        0.051948052 
                    Boston-Cambridge-Quincy, MA-NH                              Austin-Round Rock, TX 
                                       0.052041274                                        0.052325581 
                         Buffalo-Niagara Falls, NY                                    Springfield, IL 
                                       0.052325581                                        0.052631579 
                                     Iowa City, IA                                         Peoria, IL 
                                       0.053435115                                        0.053571429 
                                       Madison, WI                                         Merced, CA 
                                       0.056338028                                        0.056603774 
                                 Fort Smith, AR-OK                Nashville-Davidson-Murfreesboro, TN 
                                       0.057142857                                        0.057425743 
                                     Lancaster, PA                               Baltimore-Towson, MD 
                                       0.057692308                                        0.057990560 
                                   Reno-Sparks, NV                Chicago-Naperville-Joliet, IN-IN-WI 
                                       0.058064516                                        0.058441558 
                                       Boulder, CO                     Houston-Baytown-Sugar Land, TX 
                                       0.058479532                                        0.061249242 
                      Riverside-San Bernardino, CA                                        Danbury, CT 
                                       0.062015504                                        0.062500000 
                   Dallas-Fort Worth-Arlington, TX                                       Columbia, MO 
                                       0.062801932                                        0.063829787 
                                     Rochester, NY                                   Cedar Rapids, IA 
                                       0.065146580                                        0.066326531 
          Hartford-West Hartford-East Hartford, CT                Portland-Vancouver-Beaverton, OR-WA 
                                       0.066666667                                        0.069788797 
      Washington-Arlington-Alexandria, DC-VA-MD-WV                 Atlanta-Sandy Springs-Marietta, GA 
                                       0.070624850                                        0.072809278 
                         Norwich-New London, CT-RI                                   Lake Charles, LA 
                                       0.073891626                                        0.074074074 
                  Oxnard-Thousand Oaks-Ventura, CA                              Bloomington-Normal IL 
                                       0.074906367                                        0.075000000 
                         Brownsville-Harlingen, TX             Minneapolis-St Paul-Bloomington, MN-WI 
                                       0.075949367                                        0.076725026 
                            Las Vegas-Paradise, NV                          Greensboro-High Point, NC 
                                       0.078521940                                        0.079681275 
                                   Bakersfield, CA                                      Ann Arbor, MI 
                                       0.081632653                                        0.082352941 
                                     La Crosse, WI                                      Green Bay, WI 
                                       0.087719298                                        0.088235294 
                           Visalia-Porterville, CA                        Seattle-Tacoma-Bellevue, WA 
                                       0.090909091                                        0.099601594 
New York-Northern New Jersey-Long Island, NY-NJ-PA                                        Salinas, CA 
                                       0.104270660                                        0.125000000 
                                       Olympia, WA               Los Angeles-Long Beach-Santa Ana, CA 
                                       0.131313131                                        0.135056070 
                 San Diego-Carlsbad-San Marcos, CA              Sacramento-Arden-Arcade-Roseville, CA 
                                       0.142227122                                        0.142428786 
                                 Atlantic City, NJ                                       Stockton, CA 
                                       0.144144144                                        0.155440415 
                                 Warner Robins, GA                                         Fresno, CA 
                                       0.166666667                                        0.184818482 
                             Vallejo-Fairfield, CA                 San Jose-Sunnyvale-Santa Clara, CA 
                                       0.203007519                                        0.241791045 
                 San Francisco-Oakland-Fremont, CA                                       Honolulu, HI 
                                       0.246753247                                        0.501903553 
> 
> # 3.6
> sort(tapply(CPS$Education == "No high school diploma", CPS$MetroArea, mean, na.rm = TRUE))
                                     Iowa City, IA                                  Bowling Green, KY 
                                        0.02912621                                         0.03703704 
                             Kalamazoo-Portage, MI                               Champaign-Urbana, IL 
                                        0.05050505                                         0.05154639 
                          Bremerton-Silverdale, WA                                       Lawrence, KS 
                                        0.05405405                                         0.05952381 
                             Bloomington-Normal IL                                   Jacksonville, NC 
                                        0.06060606                                         0.06122449 
                                    Eau Claire, WI                  Palm Bay-Melbourne-Titusville, FL 
                                        0.06250000                                         0.06666667 
                                     Salisbury, MD                                    Gainesville, FL 
                                        0.06779661                                         0.06896552 
                         Fort Collins-Loveland, CO                                        Altoona, PA 
                                        0.06936416                                         0.07142857 
                                       Madison, WI                                    Tallahassee, FL 
                                        0.07423581                                         0.07500000 
                                      Fargo, ND-MN                        Albany-Schenectady-Troy, NY 
                                        0.07902736                                         0.07929515 
                                    Ocean City, NJ                          Lakeland-Winter Haven, FL 
                                        0.08000000                                         0.08130081 
                                      Billings, MT                                  Coeur d'Alene, ID 
                                        0.08280255                                         0.08333333 
                   Burlington-South Burlington, VT                                          Akron, OH 
                                        0.08394161                                         0.08421053 
                                     Ann Arbor, MI                                      Asheville, NC 
                                        0.08695652                                         0.08695652 
                    Pensacola-Ferry Pass-Brent, FL                                 Oshkosh-Neenah, WI 
                                        0.08695652                                         0.08823529 
                            Rochester-Dover, NH-ME                                      Knoxville, TN 
                                        0.08928571                                         0.08965517 
                                    Pittsburgh, PA                                Barnstable Town, MA 
                                        0.09060403                                         0.09090909 
                   Bridgeport-Stamford-Norwalk, CT                                      Johnstown, PA 
                                        0.09563758                                         0.09615385 
                             Austin-Round Rock, TX                                      La Crosse, WI 
                                        0.09629630                                         0.09677419 
                                       Boulder, CO                    Charleston-North Charleston, SC 
                                        0.09701493                                         0.09890110 
                                    Fort Wayne, IN                                        Roanoke, VA 
                                        0.09900990                                         0.10169492 
                                      Prescott, AZ                            Santa Rosa-Petaluma, CA 
                                        0.10204082                                         0.10280374 
                                 Evansville, IN-KY                                        Spokane, WA 
                                        0.10389610                                         0.10434783 
              Poughkeepsie-Newburgh-Middletown, NY                Tampa-St. Petersburg-Clearwater, FL 
                                        0.10559006                                         0.10579710 
                          Grand Rapids-Wyoming, MI                        Portland-South Portland, ME 
                                        0.10612245                                         0.10638298 
                                      Honolulu, HI                         Michigan City-La Porte, IN 
                                        0.10739300                                         0.10769231 
                            Eugene-Springfield, OR                     Boston-Cambridge-Quincy, MA-NH 
                                        0.11038961                                         0.11080485 
                                          Bend, OR                                     Vero Beach, FL 
                                        0.11111111                                         0.11428571 
                     Sarasota-Bradenton-Venice, FL             Fort Walton Beach-Crestview-Destin, FL 
                                        0.11464968                                         0.11475410 
                                         Flint, MI                                   Cedar Rapids, IA 
                                        0.11538462                                         0.11564626 
            Minneapolis-St Paul-Bloomington, MN-WI                Portland-Vancouver-Beaverton, OR-WA 
                                        0.11638204                                         0.11657143 
      Washington-Arlington-Alexandria, DC-VA-MD-WV                                         Mobile, AL 
                                        0.11683748                                         0.11702128 
                         Scranton-Wilkes Barre, PA                                         Topeka, KS 
                                        0.11724138                                         0.11724138 
                              Colorado Springs, CO                                        Olympia, WA 
                                        0.11764706                                         0.11764706 
                                   Reno-Sparks, NV                                        Appleton,WI 
                                        0.11764706                                         0.11827957 
                                      Santa Fe, NM         Virginia Beach-Norfolk-Newport News, VA-NC 
                                        0.11904762                                         0.11909651 
                 Allentown-Bethlehem-Easton, PA-NJ                                      Rochester, NY 
                                        0.11929825                                         0.12132353 
                       Seattle-Tacoma-Bellevue, WA                                 Kansas City, MO-KS 
                                        0.12168793                                         0.12172775 
                                          Napa, CA                                      Duluth, MN-WI 
                                        0.12244898                                         0.12264151 
                                     New Haven, CT                               Canton-Massillon, OH 
                                        0.12354312                                         0.12371134 
                                  Fayetteville, NC                    San Luis Obispo-Paso Robles, CA 
                                        0.12500000                                         0.12500000 
                                  Worcester, MA-CT           Philadelphia-Camden-Wilmington, PA-NJ-DE 
                                        0.12605042                                         0.12717253 
               Davenport-Moline-Rock Island, IA-IL                           Waterloo-Cedar Falls, IA 
                                        0.12727273                                         0.12800000 
                                        Pueblo, CO                                    Baton Rouge, LA 
                                        0.12844037                                         0.12871287 
                                        Racine, WI                                     Des Moines, IA 
                                        0.12903226                                         0.12944162 
                        Detroit-Warren-Livonia, MI                        Omaha-Council Bluffs, NE-IA 
                                        0.12964642                                         0.12972973 
                                      Richmond, VA                                       Savannah, GA 
                                        0.12990196                                         0.13013699 
                                       Danbury, CT                                    Bloomington, IN 
                                        0.13043478                                         0.13095238 
                                      Valdosta, GA                                         Wausau, WI 
                                        0.13157895                                         0.13157895 
            Deltona-Daytona Beach-Ormond Beach, FL                                          Tulsa, OK 
                                        0.13178295                                         0.13178295 
                           Harrisburg-Carlisle, PA                             Las Vegas-Paradise, NV 
                                        0.13286713                                         0.13307985 
        Myrtle Beach-Conway-North Myrtle Beach, SC                                     Provo-Orem, UT 
                                        0.13333333                                         0.13366337 
                                      Anderson, IN                                          Chico, CA 
                                        0.13461538                                         0.13461538 
                                  St. Louis, MO-IL                            Niles-Benton Harbor, MI 
                                        0.13461538                                         0.13513514 
                              Ogden-Clearfield, UT                               Baltimore-Towson, MD 
                                        0.13571429                                         0.13583333 
                         Buffalo-Niagara Falls, NY                  Milwaukee-Waukesha-West Allis, WI 
                                        0.13684211                                         0.13693694 
               Chicago-Naperville-Joliet, IN-IN-WI                                  Louisville, KY-IN 
                                        0.13737734                                         0.13785047 
                                     Lynchburg, VA                                         Peoria, IL 
                                        0.13793103                                         0.13829787 
                                   Sioux Falls, SD                                          Ocala, FL 
                                        0.13832200                                         0.13888889 
                  Leominster-Fitchburg-Gardner, MA                                  Oklahoma City, OK 
                                        0.14035088                                         0.14137214 
                 San Diego-Carlsbad-San Marcos, CA                                   Jacksonville, FL 
                                        0.14188267                                         0.14244186 
                                 Atlantic City, NJ                            Holland-Grand Haven, MI 
                                        0.14285714                                         0.14285714 
                                       Medford, OR                            Naples-Marco Island, FL 
                                        0.14285714                                         0.14285714 
                                   Punta Gorda, FL                                       Victoria, TX 
                                        0.14285714                                         0.14285714 
                                 Winston-Salem, NC                                 Salt Lake City, UT 
                                        0.14285714                                         0.14338235 
                Atlanta-Sandy Springs-Marietta, GA                                        Decatur, IL 
                                        0.14421553                                         0.14516129 
                                   Springfield, IL                                         Monroe, MI 
                                        0.14516129                                         0.14545455 
                                 Denver-Aurora, CO           Hartford-West Hartford-East Hartford, CT 
                                        0.14574558                                         0.14574899 
                                       Greeley, CO                  San Francisco-Oakland-Fremont, CA 
                                        0.14615385                                         0.14651368 
                              Boise City-Nampa, ID                                     Greenville, SC 
                                        0.14653465                                         0.14666667 
                             Birmingham-Hoover, AL                 Saginaw-Saginaw Township North, MI 
                                        0.14678899                                         0.14754098 
                        Santa-Cruz-Watsonville, CA                                  Trenton-Ewing, NJ 
                                        0.14814815                                         0.14814815 
                             Lexington-Fayette, KY                 San Jose-Sunnyvale-Santa Clara, CA 
                                        0.14838710                                         0.14922481 
                                    Bellingham, WA                          Norwich-New London, CT-RI 
                                        0.15000000                                         0.15060241 
                                       Lubbock, TX                       Huntington-Ashland, WV-KY-OH 
                                        0.15094340                                         0.15151515 
                                     St. Cloud, MN                                        Jackson, MS 
                                        0.15151515                                         0.15168539 
                                        Dayton, OH                                 Chattanooga, TN-GA 
                                        0.15207373                                         0.15217391 
                                      Syracuse, NY New York-Northern New Jersey-Long Island, NY-NJ-PA 
                                        0.15428571                                         0.15573586 
                                      Columbia, SC                                       Columbus, OH 
                                        0.15600000                                         0.15617716 
                                 Memphis, TN-MS-AR                                        Orlando, FL 
                                        0.15714286                                         0.16108787 
                                 Warner Robins, GA                        Cleveland-Elyria-Mentor, OH 
                                        0.16216216                                         0.16250000 
                                      Columbia, MO                                         Durham, NC 
                                        0.16279070                                         0.16326531 
             Miami-Fort Lauderdale-Miami Beach, FL                                   Indianapolis, IN 
                                        0.16356589                                         0.16371681 
                                   Albuquerque, NM                          Cape Coral-Fort Myers, FL 
                                        0.16424116                                         0.16528926 
                                      Amarillo, TX                                Anniston-Oxford, AL 
                                        0.16666667                                         0.16666667 
                           Athens-Clark County, GA                                     Binghamton, NY 
                                        0.16666667                                         0.16666667 
                       Phoenix-Mesa-Scottsdale, AZ                                      Green Bay, WI 
                                        0.16687737                                         0.16831683 
                                        Bangor, ME               Providence-Fall River-Warwick, MA-RI 
                                        0.16860465                                         0.16915688 
                        Muskegon-Norton Shores, MI                                     Tuscaloosa, AL 
                                        0.16923077                                         0.16949153 
                                      Rockford, IL                                     Las Cruses, NM 
                                        0.17021277                                         0.17283951 
                               Gulfport-Biloxi, MS                                     Huntsville, AL 
                                        0.17307692                                         0.17391304 
                                    Utica-Rome, NY                                  Fort Smith, AR-OK 
                                        0.17391304                                         0.17441860 
                 Charlotte-Gastonia-Concord, NC-SC                                      El Centro, CA 
                                        0.17444717                                         0.17567568 
                                          Erie, PA                                        Jackson, MI 
                                        0.17567568                                         0.17741935 
                   Cincinnati-Middletown, OH-KY-IN                                 Springfield, MA-CT 
                                        0.17773788                                         0.17829457 
                                       Reading, PA                              Vallejo-Fairfield, CA 
                                        0.17857143                                         0.17924528 
                                         Salem, OR                Nashville-Davidson-Murfreesboro, TN 
                                        0.17985612                                         0.18112245 
                                  Johnson City, TN                                        Wichita, KS 
                                        0.18181818                                         0.18181818 
                                  York-Hanover, PA                                     Janesville, WI 
                                        0.18181818                                         0.18292683 
                          Lansing-East Lansing, MI                          Greensboro-High Point, NC 
                                        0.18348624                                         0.18357488 
                                       Decatur, Al                                         Albany, GA 
                                        0.18421053                                         0.18604651 
                    Augusta-Richmond County, GA-SC                                     Charleston, WV 
                                        0.18796992                                         0.18834081 
                       Shreveport-Bossier City, LA                                   Raleigh-Cary, NC 
                                        0.18918919                                         0.18959108 
                                        Toledo, OH                                    Spartanburg, SC 
                                        0.18965517                                         0.18987342 
                   Dallas-Fort Worth-Arlington, TX              Sacramento-Arden-Arcade-Roseville, CA 
                                        0.19077135                                         0.19136961 
              Santa Barbara-Santa Maria-Goleta, CA                                         Monroe, LA 
                                        0.19191919                                         0.19205298 
                                         Dover, DE                        South Bend-Mishawaka, IN-MI 
                                        0.19220056                                         0.19354839 
             Fayetteville-Springdale-Rogers, AR-MO                                    Columbus, GA-AL 
                                        0.19393939                                         0.19607843 
                                      Kingston, NY                     Port St. Lucie-Fort Pierce, FL 
                                        0.19696970                                         0.19767442 
                                     Waterbury, CT                  Little Rock-North Little Rock, AR 
                                        0.19852941                                         0.19939577 
                                   Springfield, MO                                        Modesto, CA 
                                        0.20000000                                         0.20325203 
                    Houston-Baytown-Sugar Land, TX                   Oxnard-Thousand Oaks-Ventura, CA 
                                        0.20439739                                         0.20657277 
                                      Anderson, SC                                        Midland, TX 
                                        0.20689655                                         0.21052632 
                   New Orleans-Metairie-Kenner, LA                                         Fresno, CA 
                                        0.21088435                                         0.21120690 
                                  Lake Charles, LA                            Visalia-Porterville, CA 
                                        0.21739130                                         0.21782178 
                                   San Antonio, TX                      Hagerstown-Martinsburg, MD-WV 
                                        0.22004357                                         0.22222222 
                                        Yakima, WA                      Hickory-Morgantown-Lenoir, NC 
                                        0.22222222                                         0.22448980 
              Los Angeles-Long Beach-Santa Ana, CA                         Panama City-Lynn Haven, FL 
                                        0.22882883                                         0.22916667 
                                  Harrisonburg, VA                               Kankakee-Bradley, IL 
                                        0.23287671                                         0.23437500 
                          Beaumont-Port Author, TX                     Youngstown-Warren-Boardman, OH 
                                        0.23469388                                         0.23622047 
                      Riverside-San Bernardino, CA                                     Farmington, NM 
                                        0.23780488                                         0.23913043 
                      Killeen-Temple-Fort Hood, TX                                           Waco, TX 
                                        0.24050633                                         0.24074074 
                                    Montgomery, AL                                         Tucson, AZ 
                                        0.24137931                                         0.24603175 
                                     Lafayette, LA                                         Joplin, MO 
                                        0.24822695                                         0.25000000 
                                      Stockton, CA                          Brownsville-Harlingen, TX 
                                        0.25333333                                         0.25396825 
                                     Lancaster, PA                                    Bakersfield, CA 
                                        0.26771654                                         0.27218935 
                  Vineland-Millville-Bridgeton, NJ                                         Lawton, OK 
                                        0.27500000                                         0.28000000 
                                        Merced, CA                                 Corpus Christi, TX 
                                        0.28358209                                         0.29702970 
                                       El Paso, TX                                    Springfield, OH 
                                        0.30219780                                         0.31034483 
                                      Florence, AL                                         Madera, CA 
                                        0.32075472                                         0.33333333 
                                       Salinas, CA                                         Laredo, TX 
                                        0.34090909                                         0.34426230 
                          Kingsport-Bristol, TN-VA                                       Longview, TX 
                                        0.36363636                                         0.38297872 
                        McAllen-Edinburg-Pharr, TX                                          Macon, GA 
                                        0.38297872                                         0.40816327 
> 
> # 4.1
> CPS = merge(CPS, CountryMap, by.x="CountryOfBirthCode", by.y="Code", all.x=TRUE)
> summary(CPS)
 CountryOfBirthCode MetroAreaCode   PeopleInHousehold       Region               State            Age       
 Min.   : 57.00     Min.   :10420   Min.   : 1.000    Midwest  :30684   California  :11570   Min.   : 0.00  
 1st Qu.: 57.00     1st Qu.:21780   1st Qu.: 2.000    Northeast:25939   Texas       : 7077   1st Qu.:19.00  
 Median : 57.00     Median :34740   Median : 3.000    South    :41502   New York    : 5595   Median :39.00  
 Mean   : 82.68     Mean   :35075   Mean   : 3.284    West     :33177   Florida     : 5149   Mean   :38.83  
 3rd Qu.: 57.00     3rd Qu.:41860   3rd Qu.: 4.000                      Pennsylvania: 3930   3rd Qu.:57.00  
 Max.   :555.00     Max.   :79600   Max.   :15.000                      Illinois    : 3912   Max.   :85.00  
                    NA's   :34238                                       (Other)     :94069                  
          Married          Sex                          Education                   Race           Hispanic     
 Divorced     :11151   Female:67481   High school            :30906   American Indian :  1433   Min.   :0.0000  
 Married      :55509   Male  :63821   Bachelor's degree      :19443   Asian           :  6520   1st Qu.:0.0000  
 Never Married:30772                  Some college, no degree:18863   Black           : 13913   Median :0.0000  
 Separated    : 2027                  No high school diploma :16095   Multiracial     :  2897   Mean   :0.1393  
 Widowed      : 6505                  Associate degree       : 9913   Pacific Islander:   618   3rd Qu.:0.0000  
 NA's         :25338                  (Other)                :10744   White           :105921   Max.   :1.0000  
                                      NA's                   :25338                                             
               Citizenship               EmploymentStatus                               Industry    
 Citizen, Native     :116639   Disabled          : 5712   Educational and health services   :15017  
 Citizen, Naturalized:  7073   Employed          :61733   Trade                             : 8933  
 Non-Citizen         :  7590   Not in Labor Force:15246   Professional and business services: 7519  
                               Retired           :18619   Manufacturing                     : 6791  
                               Unemployed        : 4203   Leisure and hospitality           : 6364  
                               NA's              :25789   (Other)                           :21618  
                                                          NA's                              :65060  
                                              MetroArea              Country      
 New York-Northern New Jersey-Long Island, NY-NJ-PA: 5409   United States:115063  
 Washington-Arlington-Alexandria, DC-VA-MD-WV      : 4177   Mexico       :  3921  
 Los Angeles-Long Beach-Santa Ana, CA              : 4102   Philippines  :   839  
 Philadelphia-Camden-Wilmington, PA-NJ-DE          : 2855   India        :   770  
 Chicago-Naperville-Joliet, IN-IN-WI               : 2772   China        :   581  
 (Other)                                           :77749   (Other)      :  9952  
 NA's                                              :34238   NA's         :   176  
> 
> # 4.2
> sort(table(CPS$Country))

                        Cyprus                         Kosovo         Oceania, not specified       Other U. S. Island Areas 
                             0                              0                              0                              0 
                         Wales               Northern Ireland                       Tanzania                     Azerbaijan 
                             0                              2                              2                              3 
                Czechoslovakia               St. Kitts--Nevis                        Georgia                       Barbados 
                             3                              3                              5                              6 
                       Denmark                         Latvia                          Samoa                        Senegal 
                             6                              6                              6                              6 
                     Singapore                       Slovakia                          Tonga                       Zimbabwe 
                             6                              6                              6                              6 
  South America, not specified                      St. Lucia                        Algeria        Americas, not specified 
                             7                              7                              9                              9 
                        Belize                           Fiji St. Vincent and the Grenadines                        Bahamas 
                             9                              9                              9                             10 
                       Finland                         Kuwait                      Lithuania                 Czech Republic 
                            10                             10                             10                             11 
                      Dominica                       Paraguay                        Croatia                      Macedonia 
                            11                             11                             12                             12 
                       Moldova            Antigua and Barbuda                        Belgium                        Bermuda 
                            12                             13                             13                             13 
                       Bolivia                        Grenada                          Sudan                     Cape Verde 
                            13                             13                             13                             15 
                       Eritrea                   Sierra Leone                         Uganda                        Austria 
                            15                             15                             15                             17 
                       Morocco                      Sri Lanka           U. S. Virgin Islands                        Uruguay 
                            17                             17                             17                             17 
                       Albania                         Norway          Europe, not specified                     Uzbekistan 
                            18                             18                             19                             19 
    West Indies, not specified                       Malaysia                         Serbia                         Azores 
                            19                             20                             20                             22 
                          USSR                    New Zealand                    Switzerland                          Yemen 
                            22                             23                             23                             23 
                       Belarus                       Scotland                     Yugoslavia                        Hungary 
                            24                             24                             24                             25 
                   Afghanistan                      Indonesia                    Netherlands                         Sweden 
                            26                             26                             28                             28 
                      Bulgaria                     Costa Rica                   Saudi Arabia                           Guam 
                            29                             29                             29                             31 
                      Cameroon                          Syria                        Armenia                         Jordan 
                            32                             32                             35                             36 
                         Chile            Asia, not specified                        Ireland                          Spain 
                            37                             39                             39                             41 
                    Bangladesh                      Australia                          Nepal                         Panama 
                            42                             43                             44                             44 
                       Lebanon                Myanmar (Burma)                   South Africa                         Turkey 
                            45                             45                             48                             48 
                      Cambodia                        Liberia                          Kenya                        Romania 
                            49                             52                             55                             55 
                        Greece                         Israel            Trinidad and Tobago           Bosnia & Herzegovina 
                            56                             57                             60                             61 
                     Venezuela                      Argentina                      Hong Kong                       Portugal 
                            61                             64                             64                             64 
                         Egypt                        Somalia                         France                    South Korea 
                            65                             72                             73                             73 
                         Ghana                      Nicaragua                       Ethiopia                      Elsewhere 
                            76                             76                             80                             81 
                       Nigeria                           Iraq                           Laos                         Taiwan 
                            85                             97                             98                            102 
                       Ukraine                         Guyana                       Pakistan                 United Kingdom 
                           104                            109                            109                            111 
                      Thailand          Africa, not specified                        Ecuador                           Peru 
                           128                            129                            136                            136 
                          Iran                          Italy                         Brazil                         Poland 
                           144                            149                            159                            162 
                         Haiti                         Russia                        England                          Japan 
                           167                            173                            179                            187 
                      Honduras                       Columbia                        Jamaica                      Guatemala 
                           189                            206                            217                            309 
            Dominican Republic                          Korea                         Canada                           Cuba 
                           330                            334                            410                            426 
                       Germany                        Vietnam                    El Salvador                    Puerto Rico 
                           438                            458                            477                            518 
                         China                          India                    Philippines                         Mexico 
                           581                            770                            839                           3921 
                 United States 
                        115063 
> 
> # 4.3
> NewYork = subset(CPS, CPS$MetroArea == "New York-Northern New Jersey-Long Island, NY-NJ-PA", na.rm = TRUE)
> mean(NewYork$Country != "United States", na.rm = TRUE)
[1] 0.3086603
> 
> # 4.4
> sort(tapply(CPS$Country == "India", CPS$MetroArea, sum, na.rm = TRUE))
                                         Akron, OH                        Albany-Schenectady-Troy, NY 
                                                 0                                                  0 
                                        Albany, GA                  Allentown-Bethlehem-Easton, PA-NJ 
                                                 0                                                  0 
                                       Altoona, PA                                       Amarillo, TX 
                                                 0                                                  0 
                                      Anderson, IN                                      Ann Arbor, MI 
                                                 0                                                  0 
                               Anniston-Oxford, AL                                        Appleton,WI 
                                                 0                                                  0 
                                     Asheville, NC                            Athens-Clark County, GA 
                                                 0                                                  0 
                    Augusta-Richmond County, GA-SC                                         Bangor, ME 
                                                 0                                                  0 
                               Barnstable Town, MA                                    Baton Rouge, LA 
                                                 0                                                  0 
                          Beaumont-Port Author, TX                                     Bellingham, WA 
                                                 0                                                  0 
                                          Bend, OR                                       Billings, MT 
                                                 0                                                  0 
                                    Binghamton, NY                                    Bloomington, IN 
                                                 0                                                  0 
                                       Boulder, CO                                  Bowling Green, KY 
                                                 0                                                  0 
                          Bremerton-Silverdale, WA                          Buffalo-Niagara Falls, NY 
                                                 0                                                  0 
                              Canton-Massillon, OH                          Cape Coral-Fort Myers, FL 
                                                 0                                                  0 
                                  Cedar Rapids, IA                               Champaign-Urbana, IL 
                                                 0                                                  0 
                                    Charleston, WV                                 Chattanooga, TN-GA 
                                                 0                                                  0 
                                         Chico, CA                                  Coeur d'Alene, ID 
                                                 0                                                  0 
                              Colorado Springs, CO                                       Columbia, MO 
                                                 0                                                  0 
                                   Columbus, GA-AL                                       Columbus, OH 
                                                 0                                                  0 
                                Corpus Christi, TX                                        Danbury, CT 
                                                 0                                                  0 
               Davenport-Moline-Rock Island, IA-IL                                         Dayton, OH 
                                                 0                                                  0 
                                       Decatur, Al                                        Decatur, IL 
                                                 0                                                  0 
                                 Denver-Aurora, CO                                          Dover, DE 
                                                 0                                                  0 
                                     Duluth, MN-WI                                         Durham, NC 
                                                 0                                                  0 
                                    Eau Claire, WI                                      El Centro, CA 
                                                 0                                                  0 
                                       El Paso, TX                                           Erie, PA 
                                                 0                                                  0 
                            Eugene-Springfield, OR                                  Evansville, IN-KY 
                                                 0                                                  0 
                                      Fargo, ND-MN                                     Farmington, NM 
                                                 0                                                  0 
                                  Fayetteville, NC                                          Flint, MI 
                                                 0                                                  0 
                                      Florence, AL                          Fort Collins-Loveland, CO 
                                                 0                                                  0 
                                 Fort Smith, AR-OK             Fort Walton Beach-Crestview-Destin, FL 
                                                 0                                                  0 
                                   Gainesville, FL                           Grand Rapids-Wyoming, MI 
                                                 0                                                  0 
                                       Greeley, CO                                      Green Bay, WI 
                                                 0                                                  0 
                         Greensboro-High Point, NC                                Gulfport-Biloxi, MS 
                                                 0                                                  0 
                     Hagerstown-Martinsburg, MD-WV                                   Harrisonburg, VA 
                                                 0                                                  0 
                     Hickory-Morgantown-Lenoir, NC                            Holland-Grand Haven, MI 
                                                 0                                                  0 
                      Huntington-Ashland, WV-KY-OH                                     Huntsville, AL 
                                                 0                                                  0 
                                       Jackson, MI                                        Jackson, MS 
                                                 0                                                  0 
                                  Jacksonville, NC                                     Janesville, WI 
                                                 0                                                  0 
                                  Johnson City, TN                                      Johnstown, PA 
                                                 0                                                  0 
                                        Joplin, MO                              Kalamazoo-Portage, MI 
                                                 0                                                  0 
                              Kankakee-Bradley, IL                       Killeen-Temple-Fort Hood, TX 
                                                 0                                                  0 
                          Kingsport-Bristol, TN-VA                                       Kingston, NY 
                                                 0                                                  0 
                                     Knoxville, TN                                      La Crosse, WI 
                                                 0                                                  0 
                                     Lafayette, LA                                   Lake Charles, LA 
                                                 0                                                  0 
                         Lakeland-Winter Haven, FL                                      Lancaster, PA 
                                                 0                                                  0 
                          Lansing-East Lansing, MI                                         Laredo, TX 
                                                 0                                                  0 
                                    Las Cruses, NM                                         Lawton, OK 
                                                 0                                                  0 
                  Leominster-Fitchburg-Gardner, MA                              Lexington-Fayette, KY 
                                                 0                                                  0 
                                      Longview, TX                                  Louisville, KY-IN 
                                                 0                                                  0 
                                       Lubbock, TX                                      Lynchburg, VA 
                                                 0                                                  0 
                                         Macon, GA                                         Madera, CA 
                                                 0                                                  0 
                        McAllen-Edinburg-Pharr, TX                                        Medford, OR 
                                                 0                                                  0 
                                        Merced, CA                         Michigan City-La Porte, IN 
                                                 0                                                  0 
                                       Midland, TX                                         Mobile, AL 
                                                 0                                                  0 
                                       Modesto, CA                                         Monroe, LA 
                                                 0                                                  0 
                                        Monroe, MI                                     Montgomery, AL 
                                                 0                                                  0 
                        Muskegon-Norton Shores, MI         Myrtle Beach-Conway-North Myrtle Beach, SC 
                                                 0                                                  0 
                                          Napa, CA                            Niles-Benton Harbor, MI 
                                                 0                                                  0 
                                         Ocala, FL                                     Ocean City, NJ 
                                                 0                                                  0 
                                Oshkosh-Neenah, WI                  Palm Bay-Melbourne-Titusville, FL 
                                                 0                                                  0 
                        Panama City-Lynn Haven, FL                     Pensacola-Ferry Pass-Brent, FL 
                                                 0                                                  0 
                    Port St. Lucie-Fort Pierce, FL                        Portland-South Portland, ME 
                                                 0                                                  0 
              Poughkeepsie-Newburgh-Middletown, NY                                       Prescott, AZ 
                                                 0                                                  0 
                                        Pueblo, CO                                    Punta Gorda, FL 
                                                 0                                                  0 
                                        Racine, WI                                   Raleigh-Cary, NC 
                                                 0                                                  0 
                                       Reading, PA                                       Richmond, VA 
                                                 0                                                  0 
                      Riverside-San Bernardino, CA                                        Roanoke, VA 
                                                 0                                                  0 
                                      Rockford, IL                 Saginaw-Saginaw Township North, MI 
                                                 0                                                  0 
                                         Salem, OR                                        Salinas, CA 
                                                 0                                                  0 
                                     Salisbury, MD                                    San Antonio, TX 
                                                 0                                                  0 
                   San Luis Obispo-Paso Robles, CA               Santa Barbara-Santa Maria-Goleta, CA 
                                                 0                                                  0 
                                      Santa Fe, NM                            Santa Rosa-Petaluma, CA 
                                                 0                                                  0 
                        Santa-Cruz-Watsonville, CA                      Sarasota-Bradenton-Venice, FL 
                                                 0                                                  0 
                                      Savannah, GA                          Scranton-Wilkes Barre, PA 
                                                 0                                                  0 
                       Shreveport-Bossier City, LA                                    Sioux Falls, SD 
                                                 0                                                  0 
                       South Bend-Mishawaka, IN-MI                                    Spartanburg, SC 
                                                 0                                                  0 
                                       Spokane, WA                                 Springfield, MA-CT 
                                                 0                                                  0 
                                   Springfield, MO                                    Springfield, OH 
                                                 0                                                  0 
                                     St. Cloud, MN                                   St. Louis, MO-IL 
                                                 0                                                  0 
                                      Stockton, CA                                    Tallahassee, FL 
                                                 0                                                  0 
                                        Toledo, OH                                         Topeka, KS 
                                                 0                                                  0 
                                    Tuscaloosa, AL                                     Utica-Rome, NY 
                                                 0                                                  0 
                                      Valdosta, GA                              Vallejo-Fairfield, CA 
                                                 0                                                  0 
                                    Vero Beach, FL                                       Victoria, TX 
                                                 0                                                  0 
                  Vineland-Millville-Bridgeton, NJ         Virginia Beach-Norfolk-Newport News, VA-NC 
                                                 0                                                  0 
                                          Waco, TX                                      Waterbury, CT 
                                                 0                                                  0 
                          Waterloo-Cedar Falls, IA                                         Wausau, WI 
                                                 0                                                  0 
                                       Wichita, KS                                   Worcester, MA-CT 
                                                 0                                                  0 
                                        Yakima, WA                                   York-Hanover, PA 
                                                 0                                                  0 
                    Youngstown-Warren-Boardman, OH                                       Anderson, SC 
                                                 0                                                  1 
                             Bloomington-Normal IL                               Boise City-Nampa, ID 
                                                 1                                                  1 
                   Cincinnati-Middletown, OH-KY-IN                                       Columbia, SC 
                                                 1                                                  1 
                                    Greenville, SC                            Harrisburg-Carlisle, PA 
                                                 1                                                  1 
                                  Jacksonville, FL                                       Lawrence, KS 
                                                 1                                                  1 
                           Naples-Marco Island, FL                    New Orleans-Metairie-Kenner, LA 
                                                 1                                                  1 
                                       Olympia, WA                                     Provo-Orem, UT 
                                                 1                                                  1 
                                      Syracuse, NY                                         Tucson, AZ 
                                                 1                                                  1 
                                 Atlantic City, NJ                                    Bakersfield, CA 
                                                 2                                                  2 
                             Birmingham-Hoover, AL                    Burlington-South Burlington, VT 
                                                 2                                                  2 
                   Charleston-North Charleston, SC                        Cleveland-Elyria-Mentor, OH 
                                                 2                                                  2 
            Deltona-Daytona Beach-Ormond Beach, FL                                     Fort Wayne, IN 
                                                 2                                                  2 
                            Las Vegas-Paradise, NV                                  Memphis, TN-MS-AR 
                                                 2                                                  2 
             Miami-Fort Lauderdale-Miami Beach, FL                Nashville-Davidson-Murfreesboro, TN 
                                                 2                                                  2 
                              Ogden-Clearfield, UT                                  Oklahoma City, OK 
                                                 2                                                  2 
                  Oxnard-Thousand Oaks-Ventura, CA                        Phoenix-Mesa-Scottsdale, AZ 
                                                 2                                                  2 
                                     Rochester, NY                                 Salt Lake City, UT 
                                                 2                                                  2 
                                   Springfield, IL                                  Winston-Salem, NC 
                                                 2                                                  2 
                                   Albuquerque, NM                                      Iowa City, IA 
                                                 3                                                  3 
                                       Madison, WI                          Norwich-New London, CT-RI 
                                                 3                                                  3 
                                   Reno-Sparks, NV                            Visalia-Porterville, CA 
                                                 3                                                  3 
                 Charlotte-Gastonia-Concord, NC-SC                                   Indianapolis, IN 
                                                 4                                                  4 
                       Omaha-Council Bluffs, NE-IA                                         Peoria, IL 
                                                 4                                                  4 
                            Rochester-Dover, NH-ME                  San Diego-Carlsbad-San Marcos, CA 
                                                 4                                                  4 
                                 Trenton-Ewing, NJ                                          Tulsa, OK 
                                                 4                                                  4 
                                       Orlando, FL                        Seattle-Tacoma-Bellevue, WA 
                                                 5                                                  5 
                             Austin-Round Rock, TX                          Brownsville-Harlingen, TX 
                                                 6                                                  6 
                                    Des Moines, IA                  Little Rock-North Little Rock, AR 
                                                 6                                                  6 
                                     New Haven, CT                Portland-Vancouver-Beaverton, OR-WA 
                                                 6                                                  6 
                                 Warner Robins, GA                Tampa-St. Petersburg-Clearwater, FL 
                                                 6                                                  7 
             Fayetteville-Springdale-Rogers, AR-MO              Sacramento-Arden-Arcade-Roseville, CA 
                                                 8                                                  8 
                                      Honolulu, HI                     Boston-Cambridge-Quincy, MA-NH 
                                                 9                                                 11 
                                Kansas City, MO-KS                    Bridgeport-Stamford-Norwalk, CT 
                                                11                                                 12 
                 Milwaukee-Waukesha-West Allis, WI               Providence-Fall River-Warwick, MA-RI 
                                                12                                                 14 
                    Houston-Baytown-Sugar Land, TX                               Baltimore-Towson, MD 
                                                15                                                 16 
                                        Fresno, CA                                     Pittsburgh, PA 
                                                16                                                 16 
                   Dallas-Fort Worth-Arlington, TX               Los Angeles-Long Beach-Santa Ana, CA 
                                                18                                                 19 
                San Jose-Sunnyvale-Santa Clara, CA             Minneapolis-St Paul-Bloomington, MN-WI 
                                                19                                                 23 
          Hartford-West Hartford-East Hartford, CT                 Atlanta-Sandy Springs-Marietta, GA 
                                                26                                                 27 
                 San Francisco-Oakland-Fremont, CA                         Detroit-Warren-Livonia, MI 
                                                27                                                 30 
               Chicago-Naperville-Joliet, IN-IN-WI           Philadelphia-Camden-Wilmington, PA-NJ-DE 
                                                31                                                 32 
      Washington-Arlington-Alexandria, DC-VA-MD-WV New York-Northern New Jersey-Long Island, NY-NJ-PA 
                                                50                                                 96 
> sort(tapply(CPS$Country == "Brazil", CPS$MetroArea, sum, na.rm = TRUE))
                       Albany-Schenectady-Troy, NY                                         Albany, GA 
                                                 0                                                  0 
                 Allentown-Bethlehem-Easton, PA-NJ                                        Altoona, PA 
                                                 0                                                  0 
                                      Amarillo, TX                                       Anderson, IN 
                                                 0                                                  0 
                                      Anderson, SC                                      Ann Arbor, MI 
                                                 0                                                  0 
                               Anniston-Oxford, AL                                        Appleton,WI 
                                                 0                                                  0 
                                     Asheville, NC                            Athens-Clark County, GA 
                                                 0                                                  0 
                                 Atlantic City, NJ                     Augusta-Richmond County, GA-SC 
                                                 0                                                  0 
                             Austin-Round Rock, TX                                    Bakersfield, CA 
                                                 0                                                  0 
                              Baltimore-Towson, MD                                         Bangor, ME 
                                                 0                                                  0 
                                   Baton Rouge, LA                           Beaumont-Port Author, TX 
                                                 0                                                  0 
                                    Bellingham, WA                                           Bend, OR 
                                                 0                                                  0 
                                      Billings, MT                                     Binghamton, NY 
                                                 0                                                  0 
                             Birmingham-Hoover, AL                              Bloomington-Normal IL 
                                                 0                                                  0 
                                   Bloomington, IN                               Boise City-Nampa, ID 
                                                 0                                                  0 
                                       Boulder, CO                                  Bowling Green, KY 
                                                 0                                                  0 
                         Brownsville-Harlingen, TX                          Buffalo-Niagara Falls, NY 
                                                 0                                                  0 
                   Burlington-South Burlington, VT                                   Cedar Rapids, IA 
                                                 0                                                  0 
                              Champaign-Urbana, IL                    Charleston-North Charleston, SC 
                                                 0                                                  0 
                                    Charleston, WV                                 Chattanooga, TN-GA 
                                                 0                                                  0 
                       Cleveland-Elyria-Mentor, OH                                  Coeur d'Alene, ID 
                                                 0                                                  0 
                              Colorado Springs, CO                                       Columbia, MO 
                                                 0                                                  0 
                                   Columbus, GA-AL                                       Columbus, OH 
                                                 0                                                  0 
                                Corpus Christi, TX                                         Dayton, OH 
                                                 0                                                  0 
                                       Decatur, Al                                        Decatur, IL 
                                                 0                                                  0 
            Deltona-Daytona Beach-Ormond Beach, FL                                     Des Moines, IA 
                                                 0                                                  0 
                        Detroit-Warren-Livonia, MI                                          Dover, DE 
                                                 0                                                  0 
                                     Duluth, MN-WI                                         Durham, NC 
                                                 0                                                  0 
                                    Eau Claire, WI                                      El Centro, CA 
                                                 0                                                  0 
                                       El Paso, TX                                           Erie, PA 
                                                 0                                                  0 
                            Eugene-Springfield, OR                                  Evansville, IN-KY 
                                                 0                                                  0 
                                      Fargo, ND-MN                                     Farmington, NM 
                                                 0                                                  0 
             Fayetteville-Springdale-Rogers, AR-MO                                   Fayetteville, NC 
                                                 0                                                  0 
                                         Flint, MI                                       Florence, AL 
                                                 0                                                  0 
                         Fort Collins-Loveland, CO                                  Fort Smith, AR-OK 
                                                 0                                                  0 
            Fort Walton Beach-Crestview-Destin, FL                                     Fort Wayne, IN 
                                                 0                                                  0 
                                        Fresno, CA                                    Gainesville, FL 
                                                 0                                                  0 
                          Grand Rapids-Wyoming, MI                                        Greeley, CO 
                                                 0                                                  0 
                                     Green Bay, WI                          Greensboro-High Point, NC 
                                                 0                                                  0 
                                    Greenville, SC                                Gulfport-Biloxi, MS 
                                                 0                                                  0 
                     Hagerstown-Martinsburg, MD-WV                            Harrisburg-Carlisle, PA 
                                                 0                                                  0 
                                  Harrisonburg, VA                      Hickory-Morgantown-Lenoir, NC 
                                                 0                                                  0 
                           Holland-Grand Haven, MI                                       Honolulu, HI 
                                                 0                                                  0 
                    Houston-Baytown-Sugar Land, TX                       Huntington-Ashland, WV-KY-OH 
                                                 0                                                  0 
                                    Huntsville, AL                                   Indianapolis, IN 
                                                 0                                                  0 
                                     Iowa City, IA                                        Jackson, MI 
                                                 0                                                  0 
                                       Jackson, MS                                   Jacksonville, NC 
                                                 0                                                  0 
                                    Janesville, WI                                   Johnson City, TN 
                                                 0                                                  0 
                                     Johnstown, PA                                         Joplin, MO 
                                                 0                                                  0 
                             Kalamazoo-Portage, MI                               Kankakee-Bradley, IL 
                                                 0                                                  0 
                      Killeen-Temple-Fort Hood, TX                           Kingsport-Bristol, TN-VA 
                                                 0                                                  0 
                                      Kingston, NY                                      Knoxville, TN 
                                                 0                                                  0 
                                     La Crosse, WI                                      Lafayette, LA 
                                                 0                                                  0 
                                  Lake Charles, LA                          Lakeland-Winter Haven, FL 
                                                 0                                                  0 
                                     Lancaster, PA                           Lansing-East Lansing, MI 
                                                 0                                                  0 
                                        Laredo, TX                                     Las Cruses, NM 
                                                 0                                                  0 
                            Las Vegas-Paradise, NV                                       Lawrence, KS 
                                                 0                                                  0 
                                        Lawton, OK                              Lexington-Fayette, KY 
                                                 0                                                  0 
                 Little Rock-North Little Rock, AR                                       Longview, TX 
                                                 0                                                  0 
                                       Lubbock, TX                                      Lynchburg, VA 
                                                 0                                                  0 
                                         Macon, GA                                         Madera, CA 
                                                 0                                                  0 
                                       Madison, WI                         McAllen-Edinburg-Pharr, TX 
                                                 0                                                  0 
                                       Medford, OR                                  Memphis, TN-MS-AR 
                                                 0                                                  0 
                                        Merced, CA                         Michigan City-La Porte, IN 
                                                 0                                                  0 
                                       Midland, TX                  Milwaukee-Waukesha-West Allis, WI 
                                                 0                                                  0 
                                        Mobile, AL                                        Modesto, CA 
                                                 0                                                  0 
                                        Monroe, MI                         Muskegon-Norton Shores, MI 
                                                 0                                                  0 
        Myrtle Beach-Conway-North Myrtle Beach, SC                                           Napa, CA 
                                                 0                                                  0 
                           Naples-Marco Island, FL                Nashville-Davidson-Murfreesboro, TN 
                                                 0                                                  0 
                                     New Haven, CT                    New Orleans-Metairie-Kenner, LA 
                                                 0                                                  0 
                           Niles-Benton Harbor, MI                          Norwich-New London, CT-RI 
                                                 0                                                  0 
                                         Ocala, FL                                     Ocean City, NJ 
                                                 0                                                  0 
                              Ogden-Clearfield, UT                                  Oklahoma City, OK 
                                                 0                                                  0 
                                       Olympia, WA                        Omaha-Council Bluffs, NE-IA 
                                                 0                                                  0 
                                Oshkosh-Neenah, WI                  Palm Bay-Melbourne-Titusville, FL 
                                                 0                                                  0 
                        Panama City-Lynn Haven, FL                                         Peoria, IL 
                                                 0                                                  0 
                                    Pittsburgh, PA                     Port St. Lucie-Fort Pierce, FL 
                                                 0                                                  0 
                       Portland-South Portland, ME                Portland-Vancouver-Beaverton, OR-WA 
                                                 0                                                  0 
              Poughkeepsie-Newburgh-Middletown, NY                                       Prescott, AZ 
                                                 0                                                  0 
                                    Provo-Orem, UT                                         Pueblo, CO 
                                                 0                                                  0 
                                   Punta Gorda, FL                                   Raleigh-Cary, NC 
                                                 0                                                  0 
                                       Reading, PA                                    Reno-Sparks, NV 
                                                 0                                                  0 
                                      Richmond, VA                       Riverside-San Bernardino, CA 
                                                 0                                                  0 
                                       Roanoke, VA                             Rochester-Dover, NH-ME 
                                                 0                                                  0 
                                      Rockford, IL                 Saginaw-Saginaw Township North, MI 
                                                 0                                                  0 
                                       Salinas, CA                                      Salisbury, MD 
                                                 0                                                  0 
                                   San Antonio, TX                  San Diego-Carlsbad-San Marcos, CA 
                                                 0                                                  0 
                   San Luis Obispo-Paso Robles, CA               Santa Barbara-Santa Maria-Goleta, CA 
                                                 0                                                  0 
                                      Santa Fe, NM                            Santa Rosa-Petaluma, CA 
                                                 0                                                  0 
                        Santa-Cruz-Watsonville, CA                      Sarasota-Bradenton-Venice, FL 
                                                 0                                                  0 
                                      Savannah, GA                          Scranton-Wilkes Barre, PA 
                                                 0                                                  0 
                       Shreveport-Bossier City, LA                                    Sioux Falls, SD 
                                                 0                                                  0 
                       South Bend-Mishawaka, IN-MI                                    Spartanburg, SC 
                                                 0                                                  0 
                                       Spokane, WA                                    Springfield, IL 
                                                 0                                                  0 
                                Springfield, MA-CT                                    Springfield, MO 
                                                 0                                                  0 
                                   Springfield, OH                                      St. Cloud, MN 
                                                 0                                                  0 
                                  St. Louis, MO-IL                                       Stockton, CA 
                                                 0                                                  0 
                                      Syracuse, NY                                    Tallahassee, FL 
                                                 0                                                  0 
                                        Toledo, OH                                         Topeka, KS 
                                                 0                                                  0 
                                        Tucson, AZ                                          Tulsa, OK 
                                                 0                                                  0 
                                    Tuscaloosa, AL                                     Utica-Rome, NY 
                                                 0                                                  0 
                                      Valdosta, GA                              Vallejo-Fairfield, CA 
                                                 0                                                  0 
                                    Vero Beach, FL                                       Victoria, TX 
                                                 0                                                  0 
                  Vineland-Millville-Bridgeton, NJ                            Visalia-Porterville, CA 
                                                 0                                                  0 
                                          Waco, TX                                  Warner Robins, GA 
                                                 0                                                  0 
                          Waterloo-Cedar Falls, IA                                         Wausau, WI 
                                                 0                                                  0 
                                 Winston-Salem, NC                                   Worcester, MA-CT 
                                                 0                                                  0 
                                        Yakima, WA                                   York-Hanover, PA 
                                                 0                                                  0 
                    Youngstown-Warren-Boardman, OH                                          Akron, OH 
                                                 0                                                  1 
                                   Albuquerque, NM                 Atlanta-Sandy Springs-Marietta, GA 
                                                 1                                                  1 
                          Bremerton-Silverdale, WA                          Cape Coral-Fort Myers, FL 
                                                 1                                                  1 
                                         Chico, CA                    Cincinnati-Middletown, OH-KY-IN 
                                                 1                                                  1 
                                 Denver-Aurora, CO           Hartford-West Hartford-East Hartford, CT 
                                                 1                                                  1 
                                Kansas City, MO-KS                   Leominster-Fitchburg-Gardner, MA 
                                                 1                                                  1 
                                 Louisville, KY-IN             Minneapolis-St Paul-Bloomington, MN-WI 
                                                 1                                                  1 
                                        Monroe, LA                                     Montgomery, AL 
                                                 1                                                  1 
                  Oxnard-Thousand Oaks-Ventura, CA                     Pensacola-Ferry Pass-Brent, FL 
                                                 1                                                  1 
                                        Racine, WI                                      Rochester, NY 
                                                 1                                                  1 
                                         Salem, OR                 San Jose-Sunnyvale-Santa Clara, CA 
                                                 1                                                  1 
                       Seattle-Tacoma-Bellevue, WA                Tampa-St. Petersburg-Clearwater, FL 
                                                 1                                                  1 
                                 Trenton-Ewing, NJ         Virginia Beach-Norfolk-Newport News, VA-NC 
                                                 1                                                  1 
                                     Waterbury, CT                                        Wichita, KS 
                                                 1                                                  1 
                               Barnstable Town, MA                  Charlotte-Gastonia-Concord, NC-SC 
                                                 2                                                  2 
               Chicago-Naperville-Joliet, IN-IN-WI                                       Columbia, SC 
                                                 2                                                  2 
                   Dallas-Fort Worth-Arlington, TX                                   Jacksonville, FL 
                                                 2                                                  2 
                                       Orlando, FL              Sacramento-Arden-Arcade-Roseville, CA 
                                                 2                                                  2 
                              Canton-Massillon, OH                        Phoenix-Mesa-Scottsdale, AZ 
                                                 3                                                  3 
              Providence-Fall River-Warwick, MA-RI                                 Salt Lake City, UT 
                                                 3                                                  3 
               Davenport-Moline-Rock Island, IA-IL           Philadelphia-Camden-Wilmington, PA-NJ-DE 
                                                 4                                                  4 
                                       Danbury, CT                  San Francisco-Oakland-Fremont, CA 
                                                 5                                                  6 
                   Bridgeport-Stamford-Norwalk, CT New York-Northern New Jersey-Long Island, NY-NJ-PA 
                                                 7                                                  7 
      Washington-Arlington-Alexandria, DC-VA-MD-WV               Los Angeles-Long Beach-Santa Ana, CA 
                                                 8                                                  9 
             Miami-Fort Lauderdale-Miami Beach, FL                     Boston-Cambridge-Quincy, MA-NH 
                                                16                                                 18 
> sort(tapply(CPS$Country == "Somalia", CPS$MetroArea, sum, na.rm = TRUE))
                                         Akron, OH                        Albany-Schenectady-Troy, NY 
                                                 0                                                  0 
                                        Albany, GA                                    Albuquerque, NM 
                                                 0                                                  0 
                 Allentown-Bethlehem-Easton, PA-NJ                                        Altoona, PA 
                                                 0                                                  0 
                                      Amarillo, TX                                       Anderson, IN 
                                                 0                                                  0 
                                      Anderson, SC                                      Ann Arbor, MI 
                                                 0                                                  0 
                               Anniston-Oxford, AL                                        Appleton,WI 
                                                 0                                                  0 
                                     Asheville, NC                            Athens-Clark County, GA 
                                                 0                                                  0 
                Atlanta-Sandy Springs-Marietta, GA                                  Atlantic City, NJ 
                                                 0                                                  0 
                    Augusta-Richmond County, GA-SC                              Austin-Round Rock, TX 
                                                 0                                                  0 
                                   Bakersfield, CA                               Baltimore-Towson, MD 
                                                 0                                                  0 
                                        Bangor, ME                                Barnstable Town, MA 
                                                 0                                                  0 
                                   Baton Rouge, LA                           Beaumont-Port Author, TX 
                                                 0                                                  0 
                                    Bellingham, WA                                           Bend, OR 
                                                 0                                                  0 
                                      Billings, MT                                     Binghamton, NY 
                                                 0                                                  0 
                             Birmingham-Hoover, AL                              Bloomington-Normal IL 
                                                 0                                                  0 
                                   Bloomington, IN                               Boise City-Nampa, ID 
                                                 0                                                  0 
                    Boston-Cambridge-Quincy, MA-NH                                        Boulder, CO 
                                                 0                                                  0 
                                 Bowling Green, KY                           Bremerton-Silverdale, WA 
                                                 0                                                  0 
                   Bridgeport-Stamford-Norwalk, CT                          Brownsville-Harlingen, TX 
                                                 0                                                  0 
                         Buffalo-Niagara Falls, NY                               Canton-Massillon, OH 
                                                 0                                                  0 
                         Cape Coral-Fort Myers, FL                                   Cedar Rapids, IA 
                                                 0                                                  0 
                              Champaign-Urbana, IL                    Charleston-North Charleston, SC 
                                                 0                                                  0 
                                    Charleston, WV                  Charlotte-Gastonia-Concord, NC-SC 
                                                 0                                                  0 
                                Chattanooga, TN-GA                Chicago-Naperville-Joliet, IN-IN-WI 
                                                 0                                                  0 
                                         Chico, CA                    Cincinnati-Middletown, OH-KY-IN 
                                                 0                                                  0 
                       Cleveland-Elyria-Mentor, OH                                  Coeur d'Alene, ID 
                                                 0                                                  0 
                              Colorado Springs, CO                                       Columbia, MO 
                                                 0                                                  0 
                                      Columbia, SC                                    Columbus, GA-AL 
                                                 0                                                  0 
                                Corpus Christi, TX                    Dallas-Fort Worth-Arlington, TX 
                                                 0                                                  0 
                                       Danbury, CT                Davenport-Moline-Rock Island, IA-IL 
                                                 0                                                  0 
                                       Decatur, Al                                        Decatur, IL 
                                                 0                                                  0 
            Deltona-Daytona Beach-Ormond Beach, FL                                  Denver-Aurora, CO 
                                                 0                                                  0 
                                    Des Moines, IA                         Detroit-Warren-Livonia, MI 
                                                 0                                                  0 
                                         Dover, DE                                      Duluth, MN-WI 
                                                 0                                                  0 
                                        Durham, NC                                     Eau Claire, WI 
                                                 0                                                  0 
                                     El Centro, CA                                        El Paso, TX 
                                                 0                                                  0 
                                          Erie, PA                             Eugene-Springfield, OR 
                                                 0                                                  0 
                                 Evansville, IN-KY                                     Farmington, NM 
                                                 0                                                  0 
             Fayetteville-Springdale-Rogers, AR-MO                                   Fayetteville, NC 
                                                 0                                                  0 
                                         Flint, MI                                       Florence, AL 
                                                 0                                                  0 
                         Fort Collins-Loveland, CO                                  Fort Smith, AR-OK 
                                                 0                                                  0 
            Fort Walton Beach-Crestview-Destin, FL                                     Fort Wayne, IN 
                                                 0                                                  0 
                                        Fresno, CA                                    Gainesville, FL 
                                                 0                                                  0 
                          Grand Rapids-Wyoming, MI                                        Greeley, CO 
                                                 0                                                  0 
                                     Green Bay, WI                          Greensboro-High Point, NC 
                                                 0                                                  0 
                                    Greenville, SC                                Gulfport-Biloxi, MS 
                                                 0                                                  0 
                     Hagerstown-Martinsburg, MD-WV                            Harrisburg-Carlisle, PA 
                                                 0                                                  0 
                                  Harrisonburg, VA           Hartford-West Hartford-East Hartford, CT 
                                                 0                                                  0 
                     Hickory-Morgantown-Lenoir, NC                            Holland-Grand Haven, MI 
                                                 0                                                  0 
                                      Honolulu, HI                       Huntington-Ashland, WV-KY-OH 
                                                 0                                                  0 
                                    Huntsville, AL                                   Indianapolis, IN 
                                                 0                                                  0 
                                     Iowa City, IA                                        Jackson, MI 
                                                 0                                                  0 
                                       Jackson, MS                                   Jacksonville, FL 
                                                 0                                                  0 
                                  Jacksonville, NC                                     Janesville, WI 
                                                 0                                                  0 
                                  Johnson City, TN                                      Johnstown, PA 
                                                 0                                                  0 
                                        Joplin, MO                              Kalamazoo-Portage, MI 
                                                 0                                                  0 
                              Kankakee-Bradley, IL                                 Kansas City, MO-KS 
                                                 0                                                  0 
                      Killeen-Temple-Fort Hood, TX                           Kingsport-Bristol, TN-VA 
                                                 0                                                  0 
                                      Kingston, NY                                      Knoxville, TN 
                                                 0                                                  0 
                                     La Crosse, WI                                      Lafayette, LA 
                                                 0                                                  0 
                                  Lake Charles, LA                          Lakeland-Winter Haven, FL 
                                                 0                                                  0 
                                     Lancaster, PA                           Lansing-East Lansing, MI 
                                                 0                                                  0 
                                        Laredo, TX                                     Las Cruses, NM 
                                                 0                                                  0 
                            Las Vegas-Paradise, NV                                       Lawrence, KS 
                                                 0                                                  0 
                                        Lawton, OK                   Leominster-Fitchburg-Gardner, MA 
                                                 0                                                  0 
                             Lexington-Fayette, KY                  Little Rock-North Little Rock, AR 
                                                 0                                                  0 
                                      Longview, TX               Los Angeles-Long Beach-Santa Ana, CA 
                                                 0                                                  0 
                                 Louisville, KY-IN                                        Lubbock, TX 
                                                 0                                                  0 
                                     Lynchburg, VA                                          Macon, GA 
                                                 0                                                  0 
                                        Madera, CA                                        Madison, WI 
                                                 0                                                  0 
                        McAllen-Edinburg-Pharr, TX                                        Medford, OR 
                                                 0                                                  0 
                                 Memphis, TN-MS-AR                                         Merced, CA 
                                                 0                                                  0 
             Miami-Fort Lauderdale-Miami Beach, FL                         Michigan City-La Porte, IN 
                                                 0                                                  0 
                                       Midland, TX                  Milwaukee-Waukesha-West Allis, WI 
                                                 0                                                  0 
                                        Mobile, AL                                        Modesto, CA 
                                                 0                                                  0 
                                        Monroe, LA                                         Monroe, MI 
                                                 0                                                  0 
                                    Montgomery, AL                         Muskegon-Norton Shores, MI 
                                                 0                                                  0 
        Myrtle Beach-Conway-North Myrtle Beach, SC                                           Napa, CA 
                                                 0                                                  0 
                           Naples-Marco Island, FL                Nashville-Davidson-Murfreesboro, TN 
                                                 0                                                  0 
                                     New Haven, CT                    New Orleans-Metairie-Kenner, LA 
                                                 0                                                  0 
New York-Northern New Jersey-Long Island, NY-NJ-PA                            Niles-Benton Harbor, MI 
                                                 0                                                  0 
                         Norwich-New London, CT-RI                                          Ocala, FL 
                                                 0                                                  0 
                                    Ocean City, NJ                               Ogden-Clearfield, UT 
                                                 0                                                  0 
                                 Oklahoma City, OK                                        Olympia, WA 
                                                 0                                                  0 
                       Omaha-Council Bluffs, NE-IA                                        Orlando, FL 
                                                 0                                                  0 
                                Oshkosh-Neenah, WI                   Oxnard-Thousand Oaks-Ventura, CA 
                                                 0                                                  0 
                 Palm Bay-Melbourne-Titusville, FL                         Panama City-Lynn Haven, FL 
                                                 0                                                  0 
                    Pensacola-Ferry Pass-Brent, FL                                         Peoria, IL 
                                                 0                                                  0 
          Philadelphia-Camden-Wilmington, PA-NJ-DE                                     Pittsburgh, PA 
                                                 0                                                  0 
                    Port St. Lucie-Fort Pierce, FL               Poughkeepsie-Newburgh-Middletown, NY 
                                                 0                                                  0 
                                      Prescott, AZ               Providence-Fall River-Warwick, MA-RI 
                                                 0                                                  0 
                                    Provo-Orem, UT                                         Pueblo, CO 
                                                 0                                                  0 
                                   Punta Gorda, FL                                         Racine, WI 
                                                 0                                                  0 
                                  Raleigh-Cary, NC                                        Reading, PA 
                                                 0                                                  0 
                                   Reno-Sparks, NV                       Riverside-San Bernardino, CA 
                                                 0                                                  0 
                                       Roanoke, VA                             Rochester-Dover, NH-ME 
                                                 0                                                  0 
                                     Rochester, NY                                       Rockford, IL 
                                                 0                                                  0 
             Sacramento-Arden-Arcade-Roseville, CA                 Saginaw-Saginaw Township North, MI 
                                                 0                                                  0 
                                         Salem, OR                                        Salinas, CA 
                                                 0                                                  0 
                                     Salisbury, MD                                 Salt Lake City, UT 
                                                 0                                                  0 
                                   San Antonio, TX                  San Diego-Carlsbad-San Marcos, CA 
                                                 0                                                  0 
                 San Francisco-Oakland-Fremont, CA                 San Jose-Sunnyvale-Santa Clara, CA 
                                                 0                                                  0 
                   San Luis Obispo-Paso Robles, CA               Santa Barbara-Santa Maria-Goleta, CA 
                                                 0                                                  0 
                                      Santa Fe, NM                            Santa Rosa-Petaluma, CA 
                                                 0                                                  0 
                        Santa-Cruz-Watsonville, CA                      Sarasota-Bradenton-Venice, FL 
                                                 0                                                  0 
                                      Savannah, GA                          Scranton-Wilkes Barre, PA 
                                                 0                                                  0 
                       Shreveport-Bossier City, LA                        South Bend-Mishawaka, IN-MI 
                                                 0                                                  0 
                                   Spartanburg, SC                                        Spokane, WA 
                                                 0                                                  0 
                                   Springfield, IL                                 Springfield, MA-CT 
                                                 0                                                  0 
                                   Springfield, MO                                    Springfield, OH 
                                                 0                                                  0 
                                  St. Louis, MO-IL                                       Stockton, CA 
                                                 0                                                  0 
                                      Syracuse, NY                                    Tallahassee, FL 
                                                 0                                                  0 
               Tampa-St. Petersburg-Clearwater, FL                                         Toledo, OH 
                                                 0                                                  0 
                                        Topeka, KS                                  Trenton-Ewing, NJ 
                                                 0                                                  0 
                                        Tucson, AZ                                          Tulsa, OK 
                                                 0                                                  0 
                                    Tuscaloosa, AL                                     Utica-Rome, NY 
                                                 0                                                  0 
                                      Valdosta, GA                              Vallejo-Fairfield, CA 
                                                 0                                                  0 
                                    Vero Beach, FL                                       Victoria, TX 
                                                 0                                                  0 
                  Vineland-Millville-Bridgeton, NJ         Virginia Beach-Norfolk-Newport News, VA-NC 
                                                 0                                                  0 
                           Visalia-Porterville, CA                                           Waco, TX 
                                                 0                                                  0 
                                 Warner Robins, GA       Washington-Arlington-Alexandria, DC-VA-MD-WV 
                                                 0                                                  0 
                                     Waterbury, CT                           Waterloo-Cedar Falls, IA 
                                                 0                                                  0 
                                        Wausau, WI                                        Wichita, KS 
                                                 0                                                  0 
                                 Winston-Salem, NC                                   Worcester, MA-CT 
                                                 0                                                  0 
                                        Yakima, WA                                   York-Hanover, PA 
                                                 0                                                  0 
                    Youngstown-Warren-Boardman, OH                                         Dayton, OH 
                                                 0                                                  1 
                                      Richmond, VA                     Houston-Baytown-Sugar Land, TX 
                                                 1                                                  2 
                                   Sioux Falls, SD                    Burlington-South Burlington, VT 
                                                 2                                                  3 
                       Portland-South Portland, ME                Portland-Vancouver-Beaverton, OR-WA 
                                                 3                                                  3 
                                      Columbus, OH                                       Fargo, ND-MN 
                                                 5                                                  5 
                       Phoenix-Mesa-Scottsdale, AZ                        Seattle-Tacoma-Bellevue, WA 
                                                 7                                                  7 
                                     St. Cloud, MN             Minneapolis-St Paul-Bloomington, MN-WI 
                                                 7                                                 17 
> 